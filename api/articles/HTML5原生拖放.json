{"title":"HTML5原生拖放","slug":"HTML5原生拖放","date":"2017-11-07T06:59:28.000Z","updated":"2023-06-21T08:55:09.212Z","comments":true,"path":"api/articles/HTML5原生拖放.json","excerpt":null,"covers":null,"content":"<blockquote>\n<p>拖放（Drag 和 drop）是HTML5标准的组成部分</p>\n</blockquote>\n<h2 id=\"拖放\"><a href=\"#拖放\" class=\"headerlink\" title=\"拖放\"></a>拖放</h2><p>拖放是一种常见的特性，即抓取对象以后拖放到其他位置。在 HTML5 中，拖放是标准的一部分，任何元素都可以被拖放。</p>\n<h2 id=\"浏览器支持\"><a href=\"#浏览器支持\" class=\"headerlink\" title=\"浏览器支持\"></a>浏览器支持</h2><p>Internet Explorer 9 + 、Firefox、Opera 12 + 、Chrome 以及 Safari 5 +  支持拖放。</p>\n<h2 id=\"拖放API\"><a href=\"#拖放API\" class=\"headerlink\" title=\"拖放API\"></a>拖放API</h2><h3 id=\"draggable属性\"><a href=\"#draggable属性\" class=\"headerlink\" title=\"draggable属性\"></a>draggable属性</h3><p>如果希望一个网页元素可以被拖动，只需要将他的draggable属性设置为true，这个元素就可以拖动了。</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">HTML</span></header><figure class=\"iseeu highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span>拖动我试试<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div>\n<h3 id=\"事件\"><a href=\"#事件\" class=\"headerlink\" title=\"事件\"></a>事件</h3><p>拖动的过程会触发许多事件，主要有下面这些：</p>\n<ul>\n<li><code>dragstart</code>：网页元素开始拖动时触发。</li>\n<li><code>drag</code>：被拖动的元素在拖动过程中持续触发。</li>\n<li><code>dragenter</code>：被拖动的元素进入目标元素时触发，应在目标元素监听该事件。</li>\n<li><code>dragleave</code>：被拖动的元素离开目标元素时触发，应在目标元素监听该事件。</li>\n<li><code>dragover</code>：被拖动元素停留在目标元素之中时持续触发，应在目标元素监听该事件。</li>\n<li><code>drop</code>：被拖动元素或从文件系统选中的文件，拖放落下时触发。</li>\n<li><code>dragend</code>：网页元素拖动结束时触发。</li>\n</ul>\n<p>以上函数均可以指定回调函数：</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">draggableElement.addEventListener(<span class=\"string\">'dragstart'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    alert(<span class=\"string\">'拖放开始！'</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(e);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></div>\n<blockquote>\n<p>拖动过程中，鼠标移动事件将不会被触发。</p>\n</blockquote>\n<h3 id=\"dataTransfer对象\"><a href=\"#dataTransfer对象\" class=\"headerlink\" title=\"dataTransfer对象\"></a>dataTransfer对象</h3><p>拖动过程中，回调函数接受的事件参数，有一个<code>dataTransfer</code>属性。它指向一个对象，包含了与拖动相关的各种信息。<br>dataTransfer对象的属性：</p>\n<ul>\n<li>dropEffect：拖放的操作类型，决定了浏览器如何显示鼠标形状，可能的值为copy、move、link和none。</li>\n<li>effectAllowed：指定所允许的操作，可能的值为copy、move、link、copyLink、copyMove、linkMove、all、none和uninitialized（默认值，等同于all，即允许一切操作）。</li>\n<li>files：包含一个FileList对象，表示拖放所涉及的文件，主要用于处理从文件系统拖入浏览器的文件。</li>\n<li>types：储存在DataTransfer对象的数据的类型。</li>\n</ul>\n<p>dataTransfer对象的方法：</p>\n<ul>\n<li>setData(format, data)：在dataTransfer对象上储存数据。第一个参数format用来指定储存的数据类型，比如text、url、text/html等。</li>\n<li>getData(format)：从dataTransfer对象取出数据。</li>\n<li>clearData(format)：清除dataTransfer对象所储存的数据。如果指定了format参数，则只清除该格式的数据，否则清除所有数据。</li>\n<li>setDragImage(imgElement, x, y)：指定拖动过程中显示的图像。默认情况下，许多浏览器显示一个被拖动元素的半透明版本。参数imgElement必须是一个图像元素，而不是指向图像的路径，参数x和y表示图像相对于鼠标的位置。</li>\n</ul>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">draggableElement.addEventListener(<span class=\"string\">'dragstart'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    event.dataTransfer.setData(<span class=\"string\">'text'</span>, <span class=\"string\">'Hello World!'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></div>\n<p>上面代码在拖动开始时，在dataTransfer对象上储存一条文本信息，内容为“Hello World！”。当拖放结束时，可以用getData方法取出这条信息。</p>\n<blockquote>\n<p>dataTransfer对象允许在其上存储数据，这使得在被拖动元素与目标元素之间传送信息成为可能。</p>\n</blockquote>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><h3 id=\"简单拖放\"><a href=\"#简单拖放\" class=\"headerlink\" title=\"简单拖放\"></a>简单拖放</h3><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">HTML</span></header><figure class=\"iseeu highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">id</span>=<span class=\"string\">\"drag-elements\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"A\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"1.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"B\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"2.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"C\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"3.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"D\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"4.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"E\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"5.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"F\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"6.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"G\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"7.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"H\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"8.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">ul &#123;</span><br><span class=\"line\">  margin:0 auto;</span><br><span class=\"line\">  width:800px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ul:after&#123;</span><br><span class=\"line\">  content:\"\";</span><br><span class=\"line\">  display:block;</span><br><span class=\"line\">  clear:both;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">li &#123;</span><br><span class=\"line\">  width:200px;</span><br><span class=\"line\">  height:125px;</span><br><span class=\"line\">  float:left;</span><br><span class=\"line\">  background-color:#CCC;</span><br><span class=\"line\">  text-align:center;</span><br><span class=\"line\">  line-height:120px;</span><br><span class=\"line\">  font-size:50px;</span><br><span class=\"line\">  color:#F60;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.dragStart img &#123;</span><br><span class=\"line\">  width:200px;</span><br><span class=\"line\">  height:125px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> dragElements = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'#drag-elements li'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> elementDragged = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; dragElements.length; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragstart'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    e.dataTransfer.setData(<span class=\"string\">'text'</span>, <span class=\"keyword\">this</span>.id);</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragover'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\"><span class=\"javascript\">    e.dataTransfer.dropEffect = <span class=\"string\">'move'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged.setAttribute(<span class=\"string\">'class'</span>, <span class=\"string\">'dragStart'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragenter'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.id != elementDragged.id) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> tempInnerHtml = <span class=\"keyword\">this</span>.innerHTML;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">this</span>.innerHTML = elementDragged.innerHTML;</span></span><br><span class=\"line\">      elementDragged.innerHTML = tempInnerHtml;</span><br><span class=\"line\"><span class=\"javascript\">      elementDragged.removeAttribute(<span class=\"string\">'class'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      elementDragged = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragleave'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.id != elementDragged.id) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">this</span>.removeAttribute(<span class=\"string\">'class'</span>);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'drop'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> targetId = e.dataTransfer.getData(<span class=\"string\">'text'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged.removeAttribute(<span class=\"string\">'class'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragend'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div>\n<h3 id=\"拖放网元素\"><a href=\"#拖放网元素\" class=\"headerlink\" title=\"拖放网元素\"></a>拖放网元素</h3><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">HTML</span></header><figure class=\"iseeu highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">id</span>=<span class=\"string\">\"drag-elements\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span>A<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span>B<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span>C<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">id</span>=<span class=\"string\">\"drop-target\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">ul&#123;</span><br><span class=\"line\">    min-height:100px;</span><br><span class=\"line\">    background-color:#EEE;</span><br><span class=\"line\">    margin:20px;</span><br><span class=\"line\">    padding: 0;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ul li&#123;</span><br><span class=\"line\">    background-color:#CCC;</span><br><span class=\"line\">    padding:10px;</span><br><span class=\"line\">    margin-bottom:10px;</span><br><span class=\"line\">    list-style: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 获取dom元素</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> target = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#drop-target'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> dragElements = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'#drag-elements li'</span>);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 定义变量跟踪被拖动的元素</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> elementDragged = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 对可以拖放的元素绑定 dragstart 和 dragend 事件</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt;script dragElements.length; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragstart'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    e.dataTransfer.setData(<span class=\"string\">'text'</span>, <span class=\"keyword\">this</span>.innerHTML);</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragend'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 向目标元素绑定 dragover 事件,来处理元素拖动进入目标元素之后的事情</span></span></span><br><span class=\"line\"><span class=\"javascript\">target.addEventListener(<span class=\"string\">'dragover'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\"><span class=\"javascript\">  e.dataTransfer.dropEffect = <span class=\"string\">'move'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 最后定义目标元素的 drop事件,将被拖动元素从原来的位置删除</span></span></span><br><span class=\"line\"><span class=\"javascript\">target.addEventListener(<span class=\"string\">'drop'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\">  e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">this</span>.innerHTML = <span class=\"string\">'Dropped '</span> + e.dataTransfer.getData(<span class=\"string\">'text'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#drag-elements'</span>).removeChild(elementDragged);</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div>\n<h3 id=\"拖放文件\"><a href=\"#拖放文件\" class=\"headerlink\" title=\"拖放文件\"></a>拖放文件</h3><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">HTML</span></header><figure class=\"iseeu highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"target\"</span> <span class=\"attr\">title</span>=<span class=\"string\">\"拖动文件到这里\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"content\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">#target&#123;</span><br><span class=\"line\">  margin:10px;</span><br><span class=\"line\">  min-height:100px;</span><br><span class=\"line\">  max-height:600px;</span><br><span class=\"line\">  background-color:#EEE;</span><br><span class=\"line\">  border-radius:5px;</span><br><span class=\"line\">  overflow:auto;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">#content&#123;</span><br><span class=\"line\">  padding:10px;</span><br><span class=\"line\">  font-size:18px;</span><br><span class=\"line\">  line-height:25px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">/* js */</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 首先获取拖动的目标元素和内容展示区域</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> target = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#target'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> contentDiv = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#content'</span>);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 然后定义目标元素的dragover事件,定义了当文件进入目标元素后要做的事情</span></span></span><br><span class=\"line\"><span class=\"javascript\">target.addEventListener(<span class=\"string\">'dragover'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\">  e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">  e.dataTransfer.dropEffect = <span class=\"string\">'copy'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 最后定义目标元素的drop事件,展示文件内容</span></span></span><br><span class=\"line\"><span class=\"javascript\">target.addEventListener(<span class=\"string\">'drop'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\">  e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">var</span> fileList = e.dataTransfer.files;</span></span><br><span class=\"line\">  if (fileList.length &gt; 0) &#123;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> file = fileList[<span class=\"number\">0</span>];</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> reader = <span class=\"keyword\">new</span> FileReader();</span></span><br><span class=\"line\"><span class=\"javascript\">    reader.onloadend = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">      if (e.target.readyState == FileReader.DONE) &#123;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> content = reader.result;</span></span><br><span class=\"line\"><span class=\"javascript\">        contentDiv.innerHTML = <span class=\"string\">\"File: \"</span> + file.name + <span class=\"string\">\"\\n\\n\"</span> + content;</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    reader.readAsBinaryString(file);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div>\n<h3 id=\"最后附一份最近完成的基于Vue的完整的拖放实例\"><a href=\"#最后附一份最近完成的基于Vue的完整的拖放实例\" class=\"headerlink\" title=\"最后附一份最近完成的基于Vue的完整的拖放实例\"></a>最后附一份最近完成的基于Vue的完整的拖放实例</h3><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">HTML</span></header><figure class=\"iseeu highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- jquery --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- vue --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://cdn.bootcss.com/vue/2.5.3/vue.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- element-ui --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://unpkg.com/element-ui/lib/theme-chalk/index.css\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://unpkg.com/element-ui/lib/index.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-table</span> <span class=\"attr\">:data</span>=<span class=\"string\">\"tableData\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 100%\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">el-table-column</span> <span class=\"attr\">prop</span>=<span class=\"string\">\"date\"</span> <span class=\"attr\">label</span>=<span class=\"string\">\"日期\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"180\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">el-table-column</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">el-table-column</span> <span class=\"attr\">prop</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">label</span>=<span class=\"string\">\"姓名\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"180\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">el-table-column</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">el-table-column</span> <span class=\"attr\">prop</span>=<span class=\"string\">\"address\"</span> <span class=\"attr\">label</span>=<span class=\"string\">\"地址\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">el-table-column</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-table</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dragStart</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = e.target;</span></span><br><span class=\"line\"><span class=\"javascript\">        el = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        start = <span class=\"keyword\">this</span>.id;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dragOver</span>(<span class=\"params\">ev</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = ev.target;</span></span><br><span class=\"line\">        ev.preventDefault();</span><br><span class=\"line\"><span class=\"javascript\">        ev.dataTransfer.dropEffect = <span class=\"string\">'move'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        $(el).addClass(<span class=\"string\">'dragStart'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dragEnter</span>(<span class=\"params\">ev</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = ev.target;</span></span><br><span class=\"line\">        ev.preventDefault();</span><br><span class=\"line\">        ev.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.id !== el.id) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            $(el).addClass(<span class=\"string\">'dragstart'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">            el = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dragLeave</span>(<span class=\"params\">ev</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = ev.target;</span></span><br><span class=\"line\">        ev.preventDefault();</span><br><span class=\"line\">        ev.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.id !== el.id) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            $(<span class=\"keyword\">this</span>).removeClass(<span class=\"string\">'dragstart'</span>);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">'td'</span>).css(<span class=\"string\">\"borderBottomColor\"</span>, <span class=\"string\">\"\"</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"keyword\">this</span>).find(<span class=\"string\">'td'</span>).css(<span class=\"string\">\"borderBottomColor\"</span>, <span class=\"string\">\"#f66e04\"</span>)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">drop</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = e.target;</span></span><br><span class=\"line\">        e.preventDefault();</span><br><span class=\"line\">        e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.id !== el.id) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            $(<span class=\"keyword\">this</span>).removeClass(<span class=\"string\">'dragstart'</span>);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        end = <span class=\"keyword\">this</span>.id;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dragEnd</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = e.target;</span></span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">'td'</span>).css(<span class=\"string\">\"borderBottomColor\"</span>, <span class=\"string\">\"\"</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> lists = app.$data.tableData;</span></span><br><span class=\"line\"><span class=\"javascript\">        el = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> flag;</span></span><br><span class=\"line\">        flag = lists[start];</span><br><span class=\"line\">        lists[start] = lists[end];</span><br><span class=\"line\">        lists[end] = flag;</span><br><span class=\"line\">        app.$data.tableData = lists.concat([]);</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"从索引\"</span> + start + <span class=\"string\">\"移动到索引\"</span> + end)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> app = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">\"#app\"</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">        data: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\">                tableData: []</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"><span class=\"javascript\">        mounted: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">this</span>.tableData = [&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                date: <span class=\"string\">'2016-05-02'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                name: <span class=\"string\">'王小虎1'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                address: <span class=\"string\">'上海市普陀区金沙江路 1518 弄'</span></span></span><br><span class=\"line\">            &#125;, &#123;</span><br><span class=\"line\"><span class=\"javascript\">                date: <span class=\"string\">'2016-05-04'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                name: <span class=\"string\">'王小虎2'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                address: <span class=\"string\">'上海市普陀区金沙江路 1517 弄'</span></span></span><br><span class=\"line\">            &#125;, &#123;</span><br><span class=\"line\"><span class=\"javascript\">                date: <span class=\"string\">'2016-05-01'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                name: <span class=\"string\">'王小虎3'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                address: <span class=\"string\">'上海市普陀区金沙江路 1519 弄'</span></span></span><br><span class=\"line\">            &#125;, &#123;</span><br><span class=\"line\"><span class=\"javascript\">                date: <span class=\"string\">'2016-05-03'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                name: <span class=\"string\">'王小虎4'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                address: <span class=\"string\">'上海市普陀区金沙江路 1516 弄'</span></span></span><br><span class=\"line\">            &#125;];</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        watch: &#123;</span><br><span class=\"line\"><span class=\"javascript\">            tableData: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">this</span>.$nextTick(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"keyword\">this</span>.StartDrag()</span></span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"><span class=\"javascript\">            StartDrag: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">var</span> start, end;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">var</span> dragElements = <span class=\"built_in\">document</span>.getElementsByClassName(<span class=\"string\">'el-table__row'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; dragElements.length; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].setAttribute(<span class=\"string\">'draggable'</span>, <span class=\"string\">'true'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].setAttribute(<span class=\"string\">'id'</span>, i)</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; dragElements.length; i++) &#123;</span></span><br><span class=\"line\">                    /*</span><br><span class=\"line\">                    *因为涉及到翻页和全局搜索之类的功能</span><br><span class=\"line\">                    *会大量的树新数据导致dom变化</span><br><span class=\"line\">                    *因此在绑定时间之前重新渲染页面</span><br><span class=\"line\">                    *移除之前的事件重新绑定</span><br><span class=\"line\">                    */</span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"comment\">// removeEventListener</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'dragstart'</span>, dragStart);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'dragover'</span>, dragOver);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'dragenter'</span>, dragEnter);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'dragleave'</span>, dragLeave);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'drop'</span>, drop);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'dragend'</span>, dragEnd);</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"comment\">// addEventListener</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'dragstart'</span>, dragStart);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'dragover'</span>, dragOver);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'dragenter'</span>, dragEnter);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'dragleave'</span>, dragLeave);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'drop'</span>, drop);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'dragend'</span>, dragEnd);</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div>\n","more":"<blockquote>\n<p>拖放（Drag 和 drop）是HTML5标准的组成部分</p>\n</blockquote>\n<h2 id=\"拖放\"><a href=\"#拖放\" class=\"headerlink\" title=\"拖放\"></a>拖放</h2><p>拖放是一种常见的特性，即抓取对象以后拖放到其他位置。在 HTML5 中，拖放是标准的一部分，任何元素都可以被拖放。</p>\n<h2 id=\"浏览器支持\"><a href=\"#浏览器支持\" class=\"headerlink\" title=\"浏览器支持\"></a>浏览器支持</h2><p>Internet Explorer 9 + 、Firefox、Opera 12 + 、Chrome 以及 Safari 5 +  支持拖放。</p>\n<h2 id=\"拖放API\"><a href=\"#拖放API\" class=\"headerlink\" title=\"拖放API\"></a>拖放API</h2><h3 id=\"draggable属性\"><a href=\"#draggable属性\" class=\"headerlink\" title=\"draggable属性\"></a>draggable属性</h3><p>如果希望一个网页元素可以被拖动，只需要将他的draggable属性设置为true，这个元素就可以拖动了。</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span>拖动我试试<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"事件\"><a href=\"#事件\" class=\"headerlink\" title=\"事件\"></a>事件</h3><p>拖动的过程会触发许多事件，主要有下面这些：</p>\n<ul>\n<li><code>dragstart</code>：网页元素开始拖动时触发。</li>\n<li><code>drag</code>：被拖动的元素在拖动过程中持续触发。</li>\n<li><code>dragenter</code>：被拖动的元素进入目标元素时触发，应在目标元素监听该事件。</li>\n<li><code>dragleave</code>：被拖动的元素离开目标元素时触发，应在目标元素监听该事件。</li>\n<li><code>dragover</code>：被拖动元素停留在目标元素之中时持续触发，应在目标元素监听该事件。</li>\n<li><code>drop</code>：被拖动元素或从文件系统选中的文件，拖放落下时触发。</li>\n<li><code>dragend</code>：网页元素拖动结束时触发。</li>\n</ul>\n<p>以上函数均可以指定回调函数：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">draggableElement.addEventListener(<span class=\"string\">'dragstart'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">    alert(<span class=\"string\">'拖放开始！'</span>)</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(e);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>拖动过程中，鼠标移动事件将不会被触发。</p>\n</blockquote>\n<h3 id=\"dataTransfer对象\"><a href=\"#dataTransfer对象\" class=\"headerlink\" title=\"dataTransfer对象\"></a>dataTransfer对象</h3><p>拖动过程中，回调函数接受的事件参数，有一个<code>dataTransfer</code>属性。它指向一个对象，包含了与拖动相关的各种信息。<br>dataTransfer对象的属性：</p>\n<ul>\n<li>dropEffect：拖放的操作类型，决定了浏览器如何显示鼠标形状，可能的值为copy、move、link和none。</li>\n<li>effectAllowed：指定所允许的操作，可能的值为copy、move、link、copyLink、copyMove、linkMove、all、none和uninitialized（默认值，等同于all，即允许一切操作）。</li>\n<li>files：包含一个FileList对象，表示拖放所涉及的文件，主要用于处理从文件系统拖入浏览器的文件。</li>\n<li>types：储存在DataTransfer对象的数据的类型。</li>\n</ul>\n<p>dataTransfer对象的方法：</p>\n<ul>\n<li>setData(format, data)：在dataTransfer对象上储存数据。第一个参数format用来指定储存的数据类型，比如text、url、text/html等。</li>\n<li>getData(format)：从dataTransfer对象取出数据。</li>\n<li>clearData(format)：清除dataTransfer对象所储存的数据。如果指定了format参数，则只清除该格式的数据，否则清除所有数据。</li>\n<li>setDragImage(imgElement, x, y)：指定拖动过程中显示的图像。默认情况下，许多浏览器显示一个被拖动元素的半透明版本。参数imgElement必须是一个图像元素，而不是指向图像的路径，参数x和y表示图像相对于鼠标的位置。</li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">draggableElement.addEventListener(<span class=\"string\">'dragstart'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    event.dataTransfer.setData(<span class=\"string\">'text'</span>, <span class=\"string\">'Hello World!'</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>上面代码在拖动开始时，在dataTransfer对象上储存一条文本信息，内容为“Hello World！”。当拖放结束时，可以用getData方法取出这条信息。</p>\n<blockquote>\n<p>dataTransfer对象允许在其上存储数据，这使得在被拖动元素与目标元素之间传送信息成为可能。</p>\n</blockquote>\n<h2 id=\"实例\"><a href=\"#实例\" class=\"headerlink\" title=\"实例\"></a>实例</h2><h3 id=\"简单拖放\"><a href=\"#简单拖放\" class=\"headerlink\" title=\"简单拖放\"></a>简单拖放</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">id</span>=<span class=\"string\">\"drag-elements\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"A\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"1.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"B\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"2.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"C\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"3.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"D\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"4.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"E\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"5.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"F\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"6.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"G\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"7.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">id</span>=<span class=\"string\">\"H\"</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"8.jpg\"</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"\"</span> /&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">ul &#123;</span><br><span class=\"line\">  margin:0 auto;</span><br><span class=\"line\">  width:800px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ul:after&#123;</span><br><span class=\"line\">  content:\"\";</span><br><span class=\"line\">  display:block;</span><br><span class=\"line\">  clear:both;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">li &#123;</span><br><span class=\"line\">  width:200px;</span><br><span class=\"line\">  height:125px;</span><br><span class=\"line\">  float:left;</span><br><span class=\"line\">  background-color:#CCC;</span><br><span class=\"line\">  text-align:center;</span><br><span class=\"line\">  line-height:120px;</span><br><span class=\"line\">  font-size:50px;</span><br><span class=\"line\">  color:#F60;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">.dragStart img &#123;</span><br><span class=\"line\">  width:200px;</span><br><span class=\"line\">  height:125px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> dragElements = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'#drag-elements li'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> elementDragged = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; dragElements.length; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragstart'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    e.dataTransfer.setData(<span class=\"string\">'text'</span>, <span class=\"keyword\">this</span>.id);</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragover'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\"><span class=\"javascript\">    e.dataTransfer.dropEffect = <span class=\"string\">'move'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged.setAttribute(<span class=\"string\">'class'</span>, <span class=\"string\">'dragStart'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragenter'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.id != elementDragged.id) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">var</span> tempInnerHtml = <span class=\"keyword\">this</span>.innerHTML;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">this</span>.innerHTML = elementDragged.innerHTML;</span></span><br><span class=\"line\">      elementDragged.innerHTML = tempInnerHtml;</span><br><span class=\"line\"><span class=\"javascript\">      elementDragged.removeAttribute(<span class=\"string\">'class'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">      elementDragged = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragleave'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.id != elementDragged.id) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">      <span class=\"keyword\">this</span>.removeAttribute(<span class=\"string\">'class'</span>);</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'drop'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">    e.preventDefault();</span><br><span class=\"line\">    e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> targetId = e.dataTransfer.getData(<span class=\"string\">'text'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged.removeAttribute(<span class=\"string\">'class'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragend'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"拖放网元素\"><a href=\"#拖放网元素\" class=\"headerlink\" title=\"拖放网元素\"></a>拖放网元素</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">id</span>=<span class=\"string\">\"drag-elements\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span>A<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span>B<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">draggable</span>=<span class=\"string\">\"true\"</span>&gt;</span>C<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">id</span>=<span class=\"string\">\"drop-target\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">ul&#123;</span><br><span class=\"line\">    min-height:100px;</span><br><span class=\"line\">    background-color:#EEE;</span><br><span class=\"line\">    margin:20px;</span><br><span class=\"line\">    padding: 0;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ul li&#123;</span><br><span class=\"line\">    background-color:#CCC;</span><br><span class=\"line\">    padding:10px;</span><br><span class=\"line\">    margin-bottom:10px;</span><br><span class=\"line\">    list-style: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 获取dom元素</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> target = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#drop-target'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> dragElements = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'#drag-elements li'</span>);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 定义变量跟踪被拖动的元素</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> elementDragged = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 对可以拖放的元素绑定 dragstart 和 dragend 事件</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt;script dragElements.length; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragstart'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    e.dataTransfer.setData(<span class=\"string\">'text'</span>, <span class=\"keyword\">this</span>.innerHTML);</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"><span class=\"javascript\">  dragElements[i].addEventListener(<span class=\"string\">'dragend'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">    elementDragged = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 向目标元素绑定 dragover 事件,来处理元素拖动进入目标元素之后的事情</span></span></span><br><span class=\"line\"><span class=\"javascript\">target.addEventListener(<span class=\"string\">'dragover'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\"><span class=\"javascript\">  e.dataTransfer.dropEffect = <span class=\"string\">'move'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 最后定义目标元素的 drop事件,将被拖动元素从原来的位置删除</span></span></span><br><span class=\"line\"><span class=\"javascript\">target.addEventListener(<span class=\"string\">'drop'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\">  e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">this</span>.innerHTML = <span class=\"string\">'Dropped '</span> + e.dataTransfer.getData(<span class=\"string\">'text'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#drag-elements'</span>).removeChild(elementDragged);</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"拖放文件\"><a href=\"#拖放文件\" class=\"headerlink\" title=\"拖放文件\"></a>拖放文件</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"target\"</span> <span class=\"attr\">title</span>=<span class=\"string\">\"拖动文件到这里\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"content\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\">#target&#123;</span><br><span class=\"line\">  margin:10px;</span><br><span class=\"line\">  min-height:100px;</span><br><span class=\"line\">  max-height:600px;</span><br><span class=\"line\">  background-color:#EEE;</span><br><span class=\"line\">  border-radius:5px;</span><br><span class=\"line\">  overflow:auto;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">#content&#123;</span><br><span class=\"line\">  padding:10px;</span><br><span class=\"line\">  font-size:18px;</span><br><span class=\"line\">  line-height:25px;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">/* js */</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 首先获取拖动的目标元素和内容展示区域</span></span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> target = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#target'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"keyword\">var</span> contentDiv = <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'#content'</span>);</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 然后定义目标元素的dragover事件,定义了当文件进入目标元素后要做的事情</span></span></span><br><span class=\"line\"><span class=\"javascript\">target.addEventListener(<span class=\"string\">'dragover'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\">  e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">  e.dataTransfer.dropEffect = <span class=\"string\">'copy'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\"><span class=\"comment\">// 最后定义目标元素的drop事件,展示文件内容</span></span></span><br><span class=\"line\"><span class=\"javascript\">target.addEventListener(<span class=\"string\">'drop'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">  e.preventDefault();</span><br><span class=\"line\">  e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">  <span class=\"keyword\">var</span> fileList = e.dataTransfer.files;</span></span><br><span class=\"line\">  if (fileList.length &gt; 0) &#123;</span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> file = fileList[<span class=\"number\">0</span>];</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> reader = <span class=\"keyword\">new</span> FileReader();</span></span><br><span class=\"line\"><span class=\"javascript\">    reader.onloadend = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\">      if (e.target.readyState == FileReader.DONE) &#123;</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> content = reader.result;</span></span><br><span class=\"line\"><span class=\"javascript\">        contentDiv.innerHTML = <span class=\"string\">\"File: \"</span> + file.name + <span class=\"string\">\"\\n\\n\"</span> + content;</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    reader.readAsBinaryString(file);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"最后附一份最近完成的基于Vue的完整的拖放实例\"><a href=\"#最后附一份最近完成的基于Vue的完整的拖放实例\" class=\"headerlink\" title=\"最后附一份最近完成的基于Vue的完整的拖放实例\"></a>最后附一份最近完成的基于Vue的完整的拖放实例</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"ie=edge\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>Document<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- jquery --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- vue --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://cdn.bootcss.com/vue/2.5.3/vue.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- element-ui --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"https://unpkg.com/element-ui/lib/theme-chalk/index.css\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"https://unpkg.com/element-ui/lib/index.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">el-table</span> <span class=\"attr\">:data</span>=<span class=\"string\">\"tableData\"</span> <span class=\"attr\">style</span>=<span class=\"string\">\"width: 100%\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">el-table-column</span> <span class=\"attr\">prop</span>=<span class=\"string\">\"date\"</span> <span class=\"attr\">label</span>=<span class=\"string\">\"日期\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"180\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">el-table-column</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">el-table-column</span> <span class=\"attr\">prop</span>=<span class=\"string\">\"name\"</span> <span class=\"attr\">label</span>=<span class=\"string\">\"姓名\"</span> <span class=\"attr\">width</span>=<span class=\"string\">\"180\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">el-table-column</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">el-table-column</span> <span class=\"attr\">prop</span>=<span class=\"string\">\"address\"</span> <span class=\"attr\">label</span>=<span class=\"string\">\"地址\"</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">el-table-column</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">el-table</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dragStart</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = e.target;</span></span><br><span class=\"line\"><span class=\"javascript\">        el = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        start = <span class=\"keyword\">this</span>.id;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dragOver</span>(<span class=\"params\">ev</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = ev.target;</span></span><br><span class=\"line\">        ev.preventDefault();</span><br><span class=\"line\"><span class=\"javascript\">        ev.dataTransfer.dropEffect = <span class=\"string\">'move'</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        $(el).addClass(<span class=\"string\">'dragStart'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dragEnter</span>(<span class=\"params\">ev</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = ev.target;</span></span><br><span class=\"line\">        ev.preventDefault();</span><br><span class=\"line\">        ev.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.id !== el.id) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            $(el).addClass(<span class=\"string\">'dragstart'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">            el = <span class=\"keyword\">this</span>;</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dragLeave</span>(<span class=\"params\">ev</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = ev.target;</span></span><br><span class=\"line\">        ev.preventDefault();</span><br><span class=\"line\">        ev.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.id !== el.id) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            $(<span class=\"keyword\">this</span>).removeClass(<span class=\"string\">'dragstart'</span>);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">'td'</span>).css(<span class=\"string\">\"borderBottomColor\"</span>, <span class=\"string\">\"\"</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"keyword\">this</span>).find(<span class=\"string\">'td'</span>).css(<span class=\"string\">\"borderBottomColor\"</span>, <span class=\"string\">\"#f66e04\"</span>)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">drop</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = e.target;</span></span><br><span class=\"line\">        e.preventDefault();</span><br><span class=\"line\">        e.stopPropagation();</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.id !== el.id) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            $(<span class=\"keyword\">this</span>).removeClass(<span class=\"string\">'dragstart'</span>);</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"><span class=\"javascript\">        end = <span class=\"keyword\">this</span>.id;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">dragEnd</span>(<span class=\"params\">e</span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> el = e.target;</span></span><br><span class=\"line\"><span class=\"javascript\">        $(<span class=\"string\">'td'</span>).css(<span class=\"string\">\"borderBottomColor\"</span>, <span class=\"string\">\"\"</span>)</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> lists = app.$data.tableData;</span></span><br><span class=\"line\"><span class=\"javascript\">        el = <span class=\"literal\">null</span>;</span></span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"keyword\">var</span> flag;</span></span><br><span class=\"line\">        flag = lists[start];</span><br><span class=\"line\">        lists[start] = lists[end];</span><br><span class=\"line\">        lists[end] = flag;</span><br><span class=\"line\">        app.$data.tableData = lists.concat([]);</span><br><span class=\"line\"><span class=\"javascript\">        <span class=\"built_in\">console</span>.log(<span class=\"string\">\"从索引\"</span> + start + <span class=\"string\">\"移动到索引\"</span> + end)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">var</span> app = <span class=\"keyword\">new</span> Vue(&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">        el: <span class=\"string\">\"#app\"</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">        data: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\">                tableData: []</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\"><span class=\"javascript\">        mounted: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">            <span class=\"keyword\">this</span>.tableData = [&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                date: <span class=\"string\">'2016-05-02'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                name: <span class=\"string\">'王小虎1'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                address: <span class=\"string\">'上海市普陀区金沙江路 1518 弄'</span></span></span><br><span class=\"line\">            &#125;, &#123;</span><br><span class=\"line\"><span class=\"javascript\">                date: <span class=\"string\">'2016-05-04'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                name: <span class=\"string\">'王小虎2'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                address: <span class=\"string\">'上海市普陀区金沙江路 1517 弄'</span></span></span><br><span class=\"line\">            &#125;, &#123;</span><br><span class=\"line\"><span class=\"javascript\">                date: <span class=\"string\">'2016-05-01'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                name: <span class=\"string\">'王小虎3'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                address: <span class=\"string\">'上海市普陀区金沙江路 1519 弄'</span></span></span><br><span class=\"line\">            &#125;, &#123;</span><br><span class=\"line\"><span class=\"javascript\">                date: <span class=\"string\">'2016-05-03'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                name: <span class=\"string\">'王小虎4'</span>,</span></span><br><span class=\"line\"><span class=\"javascript\">                address: <span class=\"string\">'上海市普陀区金沙江路 1516 弄'</span></span></span><br><span class=\"line\">            &#125;];</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        watch: &#123;</span><br><span class=\"line\"><span class=\"javascript\">            tableData: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">this</span>.$nextTick(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"keyword\">this</span>.StartDrag()</span></span><br><span class=\"line\">                &#125;)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\"><span class=\"javascript\">            StartDrag: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">var</span> start, end;</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">var</span> dragElements = <span class=\"built_in\">document</span>.getElementsByClassName(<span class=\"string\">'el-table__row'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; dragElements.length; i++) &#123;</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].setAttribute(<span class=\"string\">'draggable'</span>, <span class=\"string\">'true'</span>);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].setAttribute(<span class=\"string\">'id'</span>, i)</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"><span class=\"javascript\">                <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; dragElements.length; i++) &#123;</span></span><br><span class=\"line\">                    /*</span><br><span class=\"line\">                    *因为涉及到翻页和全局搜索之类的功能</span><br><span class=\"line\">                    *会大量的树新数据导致dom变化</span><br><span class=\"line\">                    *因此在绑定时间之前重新渲染页面</span><br><span class=\"line\">                    *移除之前的事件重新绑定</span><br><span class=\"line\">                    */</span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"comment\">// removeEventListener</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'dragstart'</span>, dragStart);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'dragover'</span>, dragOver);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'dragenter'</span>, dragEnter);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'dragleave'</span>, dragLeave);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'drop'</span>, drop);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].removeEventListener(<span class=\"string\">'dragend'</span>, dragEnd);</span></span><br><span class=\"line\"><span class=\"javascript\">                    <span class=\"comment\">// addEventListener</span></span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'dragstart'</span>, dragStart);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'dragover'</span>, dragOver);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'dragenter'</span>, dragEnter);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'dragleave'</span>, dragLeave);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'drop'</span>, drop);</span></span><br><span class=\"line\"><span class=\"javascript\">                    dragElements[i].addEventListener(<span class=\"string\">'dragend'</span>, dragEnd);</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n","categories":[{"name":"html5","path":"api/categories/html5.json"}],"tags":[{"name":"draggable","path":"api/tags/draggable.json"},{"name":"html5","path":"api/tags/html5.json"}]}