{"title":"从零搭建Vue UI组件库(五)","slug":"从零搭建Vue UI组件库(五)","date":"2021-04-20T08:24:12.000Z","updated":"2023-06-21T08:55:09.215Z","comments":true,"path":"api/articles/从零搭建Vue UI组件库(五).json","excerpt":null,"covers":null,"content":"<h2 id=\"写在前面\"><a href=\"#写在前面\" class=\"headerlink\" title=\"写在前面\"></a>写在前面</h2><p>接上一篇，这篇说的是使用<code>markdown</code>作为开发文档，原本想的是直接使用<code>vuepress</code>加入进来，万万没想到它不支持<code>vue3</code>，而新的<code>vuepress@next</code>功能还未完善，试过之后不太理想，所以还是照着<code>element-plus</code>来吧</p>\n<blockquote>\n<p>在参考和查找的过程中，无意间发现了一个类似的仓库：<a href=\"https://github.com/ninecat-ui/ninecat-ui\" target=\"_blank\" rel=\"noopener\">ninecat-ui</a>,所以这篇文档在 element 基础上，也参照了部分 ninecat-ui 的思路（当然主要还是 element）</p>\n</blockquote>\n<h2 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h2><h3 id=\"markdown-相关依赖\"><a href=\"#markdown-相关依赖\" class=\"headerlink\" title=\"markdown 相关依赖\"></a>markdown 相关依赖</h3><p>安装解析 markdown 语法的依赖</p>\n<p><code>yarn add -D highlight.js markdown-it markdown-it-anchor markdown-it-chain markdown-it-container transliteration -W</code></p>\n<h3 id=\"vue-相关依赖\"><a href=\"#vue-相关依赖\" class=\"headerlink\" title=\"vue 相关依赖\"></a>vue 相关依赖</h3><p>本地开发文档自然需要设置路由，后面可能会需要补全国际化，还要提前安装好 i18n。<code>yarn add -D vue-router@next vue-i18n@next -W</code></p>\n<h2 id=\"修改-webpack-配置\"><a href=\"#修改-webpack-配置\" class=\"headerlink\" title=\"修改 webpack 配置\"></a>修改 webpack 配置</h2><h3 id=\"修改-css-rules\"><a href=\"#修改-css-rules\" class=\"headerlink\" title=\"修改 css rules\"></a>修改 css rules</h3><p>之前写的疏忽，loader 里没有包含 <code>css</code>文件，导致了一些问题，首先修复</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">DIFF</span></header><figure class=\"iseeu highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// build/webpack.config.base.js</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"deletion\">-  test: /\\.scss$/,</span></span><br><span class=\"line\"><span class=\"addition\">+  test: /\\.(css|sass|scss)$/,</span></span><br><span class=\"line\">  use: [</span><br><span class=\"line\">    &#123; loader: 'style-loader' &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      loader: 'css-loader',</span><br><span class=\"line\">      options: &#123; sourceMap: true &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      loader: 'sass-loader'</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"添加解析-markdown-的-loader\"><a href=\"#添加解析-markdown-的-loader\" class=\"headerlink\" title=\"添加解析 markdown 的 loader\"></a>添加解析 markdown 的 loader</h3><blockquote>\n<p>说来惭愧，这个 loader 我现在还是很茫然，因为是从 element-plus 粘贴来的。并不清楚为什么要这么配置，需要后面再仔细学习一下</p>\n</blockquote>\n<h4 id=\"创建-markdown-loader\"><a href=\"#创建-markdown-loader\" class=\"headerlink\" title=\"创建 markdown-loader\"></a>创建 markdown-loader</h4><p>build 文件夹中创建 md-loader 文件夹，新建<code>config.js</code>、<code>container.js</code>、 <code>fence.js</code>、 <code>index.js</code>、<code>util.js</code>作为 md-loader 配置</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* config.js */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Config = <span class=\"built_in\">require</span>(<span class=\"string\">'markdown-it-chain'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> anchorPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'markdown-it-anchor'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> slugify = <span class=\"built_in\">require</span>(<span class=\"string\">'transliteration'</span>).slugify</span><br><span class=\"line\"><span class=\"keyword\">const</span> hljs = <span class=\"built_in\">require</span>(<span class=\"string\">'highlight.js'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> containers = <span class=\"built_in\">require</span>(<span class=\"string\">'./containers'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> overWriteFenceRule = <span class=\"built_in\">require</span>(<span class=\"string\">'./fence'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"keyword\">new</span> Config()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> highlight = <span class=\"function\">(<span class=\"params\">str, lang</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!lang || !hljs.getLanguage(lang)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;pre&gt;&lt;code class=\"hljs\"&gt;'</span> + str + <span class=\"string\">'&lt;/code&gt;&lt;/pre&gt;'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> html = hljs.highlight(lang, str, <span class=\"literal\">true</span>, <span class=\"literal\">undefined</span>).value</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">`&lt;pre&gt;&lt;code class=\"hljs language-<span class=\"subst\">$&#123;lang&#125;</span>\"&gt;<span class=\"subst\">$&#123;html&#125;</span>&lt;/code&gt;&lt;/pre&gt;`</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">config.options</span><br><span class=\"line\">  .html(<span class=\"literal\">true</span>)</span><br><span class=\"line\">  .highlight(highlight)</span><br><span class=\"line\">  .end()</span><br><span class=\"line\"></span><br><span class=\"line\">  .plugin(<span class=\"string\">'anchor'</span>)</span><br><span class=\"line\">  .use(anchorPlugin, [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      level: <span class=\"number\">2</span>,</span><br><span class=\"line\">      slugify: slugify,</span><br><span class=\"line\">      permalink: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      permalinkBefore: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      <span class=\"comment\">// permalinkSymbol: '#'</span></span><br><span class=\"line\">      permalinkSymbol: <span class=\"string\">''</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ])</span><br><span class=\"line\">  .end()</span><br><span class=\"line\"></span><br><span class=\"line\">  .plugin(<span class=\"string\">'containers'</span>)</span><br><span class=\"line\">  .use(containers)</span><br><span class=\"line\">  .end()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> md = config.toMd()</span><br><span class=\"line\">overWriteFenceRule(md)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = md</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// --------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* containers.js */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mdContainer = <span class=\"built_in\">require</span>(<span class=\"string\">'markdown-it-container'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"params\">md</span> =&gt;</span> &#123;</span><br><span class=\"line\">  md.use(mdContainer, <span class=\"string\">'demo'</span>, &#123;</span><br><span class=\"line\">    validate(params) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> params.trim().match(<span class=\"regexp\">/^demo\\s*(.*)$/</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    render(tokens, idx) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> m = tokens[idx].info.trim().match(<span class=\"regexp\">/^demo\\s*(.*)$/</span>)</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (tokens[idx].nesting === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> description = m &amp;&amp; m.length &gt; <span class=\"number\">1</span> ? m[<span class=\"number\">1</span>] : <span class=\"string\">''</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> content = tokens[idx + <span class=\"number\">1</span>].type === <span class=\"string\">'fence'</span> ? tokens[idx + <span class=\"number\">1</span>].content : <span class=\"string\">''</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">`&lt;demo-block&gt;</span></span><br><span class=\"line\"><span class=\"string\">        <span class=\"subst\">$&#123;description ? <span class=\"string\">`&lt;div&gt;<span class=\"subst\">$&#123;md.render(description)&#125;</span>&lt;/div&gt;`</span> : <span class=\"string\">''</span>&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">        &lt;!--admin-demo: <span class=\"subst\">$&#123;content&#125;</span>:admin-demo--&gt;</span></span><br><span class=\"line\"><span class=\"string\">        `</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'&lt;/demo-block&gt;'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  md.use(mdContainer, <span class=\"string\">'tip'</span>)</span><br><span class=\"line\">  md.use(mdContainer, <span class=\"string\">'warning'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// --------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* fence.js */</span></span><br><span class=\"line\"><span class=\"comment\">// 覆盖默认的 fence 渲染策略</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"params\">md</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> defaultRender = md.renderer.rules.fence</span><br><span class=\"line\">  md.renderer.rules.fence = <span class=\"function\">(<span class=\"params\">tokens, idx, options, env, self</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> token = tokens[idx]</span><br><span class=\"line\">    <span class=\"comment\">// 判断该 fence 是否在 :::demo 内</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> prevToken = tokens[idx - <span class=\"number\">1</span>]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> isInDemoContainer =</span><br><span class=\"line\">      prevToken &amp;&amp; prevToken.nesting === <span class=\"number\">1</span> &amp;&amp; prevToken.info.trim().match(<span class=\"regexp\">/^demo\\s*(.*)$/</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (token.info === <span class=\"string\">'html'</span> &amp;&amp; isInDemoContainer) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`&lt;template #highlight&gt;&lt;pre v-pre&gt;&lt;code class=\"html\"&gt;<span class=\"subst\">$&#123;md.utils.escapeHtml(</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">        token.content</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">      )&#125;</span>&lt;/code&gt;&lt;/pre&gt;&lt;/template&gt;`</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> defaultRender(tokens, idx, options, env, self)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// --------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* index.js */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; stripScript, stripTemplate, genInlineComponentText &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'./util'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> md = <span class=\"built_in\">require</span>(<span class=\"string\">'./config'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">source</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> content = md.render(source)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> startTag = <span class=\"string\">'&lt;!--admin-demo:'</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> startTagLen = startTag.length</span><br><span class=\"line\">  <span class=\"keyword\">const</span> endTag = <span class=\"string\">':admin-demo--&gt;'</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> endTagLen = endTag.length</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> componenetsString = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> id = <span class=\"number\">0</span> <span class=\"comment\">// demo 的 id</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> output = [] <span class=\"comment\">// 输出的内容</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> start = <span class=\"number\">0</span> <span class=\"comment\">// 字符串开始位置</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> commentStart = content.indexOf(startTag)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> commentEnd = content.indexOf(endTag, commentStart + startTagLen)</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (commentStart !== <span class=\"number\">-1</span> &amp;&amp; commentEnd !== <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">    output.push(content.slice(start, commentStart))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> commentContent = content.slice(commentStart + startTagLen, commentEnd)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> html = stripTemplate(commentContent)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> script = stripScript(commentContent)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> demoComponentContent = genInlineComponentText(html, script)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> demoComponentName = <span class=\"string\">`admin-demo<span class=\"subst\">$&#123;id&#125;</span>`</span></span><br><span class=\"line\">    output.push(<span class=\"string\">`&lt;template #source&gt;&lt;<span class=\"subst\">$&#123;demoComponentName&#125;</span> /&gt;&lt;/template&gt;`</span>)</span><br><span class=\"line\">    componenetsString += <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">JSON</span>.stringify(demoComponentName)&#125;</span>: <span class=\"subst\">$&#123;demoComponentContent&#125;</span>,`</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 重新计算下一次的位置</span></span><br><span class=\"line\">    id++</span><br><span class=\"line\">    start = commentEnd + endTagLen</span><br><span class=\"line\">    commentStart = content.indexOf(startTag, start)</span><br><span class=\"line\">    commentEnd = content.indexOf(endTag, commentStart + startTagLen)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 仅允许在 demo 不存在时，才可以在 Markdown 中写 script 标签</span></span><br><span class=\"line\">  <span class=\"comment\">// todo: 优化这段逻辑</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> pageScript = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (componenetsString) &#123;</span><br><span class=\"line\">    pageScript = <span class=\"string\">`&lt;script lang=\"ts\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">      import * as Vue from 'vue';</span></span><br><span class=\"line\"><span class=\"string\">      export default &#123;</span></span><br><span class=\"line\"><span class=\"string\">        name: 'component-doc',</span></span><br><span class=\"line\"><span class=\"string\">        components: &#123;</span></span><br><span class=\"line\"><span class=\"string\">          <span class=\"subst\">$&#123;componenetsString&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\">      &#125;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;/script&gt;`</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (content.indexOf(<span class=\"string\">'&lt;script&gt;'</span>) === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 硬编码，有待改善</span></span><br><span class=\"line\">    start = content.indexOf(<span class=\"string\">'&lt;/script&gt;'</span>) + <span class=\"string\">'&lt;/script&gt;'</span>.length</span><br><span class=\"line\">    pageScript = content.slice(<span class=\"number\">0</span>, start)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  output.push(content.slice(start))</span><br><span class=\"line\">  <span class=\"keyword\">const</span> result = <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  &lt;template&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;section class=\"content admin-doc\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">      <span class=\"subst\">$&#123;output.join(<span class=\"string\">''</span>)&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">    &lt;/section&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/template&gt;</span></span><br><span class=\"line\"><span class=\"string\">  <span class=\"subst\">$&#123;pageScript&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// --------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* util.js */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; compileTemplate, TemplateCompiler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'@vue/compiler-sfc'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stripScript</span>(<span class=\"params\">content</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> result = content.match(<span class=\"regexp\">/&lt;(script)&gt;([\\s\\S]+)&lt;\\/\\1&gt;/</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result &amp;&amp; result[<span class=\"number\">2</span>] ? result[<span class=\"number\">2</span>].trim() : <span class=\"string\">''</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stripStyle</span>(<span class=\"params\">content</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> result = content.match(<span class=\"regexp\">/&lt;(style)\\s*&gt;([\\s\\S]+)&lt;\\/\\1&gt;/</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result &amp;&amp; result[<span class=\"number\">2</span>] ? result[<span class=\"number\">2</span>].trim() : <span class=\"string\">''</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 编写例子时不一定有 template。所以采取的方案是剔除其他的内容</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stripTemplate</span>(<span class=\"params\">content</span>) </span>&#123;</span><br><span class=\"line\">  content = content.trim()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!content) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> content</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> content.replace(<span class=\"regexp\">/&lt;(script|style)[\\s\\S]+&lt;\\/\\1&gt;/g</span>, <span class=\"string\">''</span>).trim()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pad</span>(<span class=\"params\">source</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> source</span><br><span class=\"line\">    .split(<span class=\"regexp\">/\\r?\\n/</span>)</span><br><span class=\"line\">    .map(<span class=\"function\"><span class=\"params\">line</span> =&gt;</span> <span class=\"string\">`  <span class=\"subst\">$&#123;line&#125;</span>`</span>)</span><br><span class=\"line\">    .join(<span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> templateReplaceRegex = <span class=\"regexp\">/&lt;template&gt;([\\s\\S]+)&lt;\\/template&gt;/g</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">genInlineComponentText</span>(<span class=\"params\">template, script</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// https://github.com/vuejs/vue-loader/blob/423b8341ab368c2117931e909e2da9af74503635/lib/loaders/templateLoader.js#L46</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> source = template</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (templateReplaceRegex.test(source)) &#123;</span><br><span class=\"line\">    source = source.replace(templateReplaceRegex, <span class=\"string\">'$1'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> finalOptions = &#123;</span><br><span class=\"line\">    source: <span class=\"string\">`&lt;div&gt;<span class=\"subst\">$&#123;source&#125;</span>&lt;/div&gt;`</span>,</span><br><span class=\"line\">    filename: <span class=\"string\">'inline-component'</span>,</span><br><span class=\"line\">    compiler: TemplateCompiler,</span><br><span class=\"line\">    compilerOptions: &#123;</span><br><span class=\"line\">      mode: <span class=\"string\">'function'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> compiled = compileTemplate(finalOptions)</span><br><span class=\"line\">  <span class=\"comment\">// tips</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (compiled.tips &amp;&amp; compiled.tips.length) &#123;</span><br><span class=\"line\">    compiled.tips.forEach(<span class=\"function\"><span class=\"params\">tip</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.warn(tip)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// errors</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (compiled.errors &amp;&amp; compiled.errors.length) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(</span><br><span class=\"line\">      <span class=\"string\">`\\n  Error compiling template:\\n<span class=\"subst\">$&#123;pad(compiled.source)&#125;</span>\\n`</span> +</span><br><span class=\"line\">        compiled.errors.map(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> <span class=\"string\">`  - <span class=\"subst\">$&#123;e&#125;</span>`</span>).join(<span class=\"string\">'\\n'</span>) +</span><br><span class=\"line\">        <span class=\"string\">'\\n'</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> demoComponentContent = <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    <span class=\"subst\">$&#123;compiled.code.replace(<span class=\"string\">'return function render'</span>, <span class=\"string\">'function render'</span>)&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\">  <span class=\"comment\">// todo: 这里采用了硬编码有待改进</span></span><br><span class=\"line\">  script = script.trim()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (script) &#123;</span><br><span class=\"line\">    script = script</span><br><span class=\"line\">      .replace(<span class=\"regexp\">/export\\s+default/</span>, <span class=\"string\">'const democomponentExport ='</span>)</span><br><span class=\"line\">      .replace(<span class=\"regexp\">/import (&#123;.*&#125;) from 'vue'/g</span>, (s, s1) =&gt; <span class=\"string\">`const <span class=\"subst\">$&#123;s1&#125;</span> = Vue`</span>)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    script = <span class=\"string\">'const democomponentExport = &#123;&#125;'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  demoComponentContent = <span class=\"string\">`(function() &#123;</span></span><br><span class=\"line\"><span class=\"string\">    <span class=\"subst\">$&#123;demoComponentContent&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">    <span class=\"subst\">$&#123;script&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">    return &#123;</span></span><br><span class=\"line\"><span class=\"string\">      render,</span></span><br><span class=\"line\"><span class=\"string\">      ...democomponentExport</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;)()`</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> demoComponentContent</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  stripScript,</span><br><span class=\"line\">  stripStyle,</span><br><span class=\"line\">  stripTemplate,</span><br><span class=\"line\">  genInlineComponentText</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<h4 id=\"添加-md-loader-配置\"><a href=\"#添加-md-loader-配置\" class=\"headerlink\" title=\"添加 md-loader 配置\"></a>添加 md-loader 配置</h4><p><code>webpack.config.base.js</code>添加 markdown 规则</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">DIFF</span></header><figure class=\"iseeu highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"addition\">+&#123;</span></span><br><span class=\"line\"><span class=\"addition\">+  test: /\\.md$/,</span></span><br><span class=\"line\"><span class=\"addition\">+  use: [</span></span><br><span class=\"line\"><span class=\"addition\">+    &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+      loader: 'vue-loader',</span></span><br><span class=\"line\"><span class=\"addition\">+      options: &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+        compilerOptions: &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+          preserveWhitespace: false</span></span><br><span class=\"line\"><span class=\"addition\">+        &#125;</span></span><br><span class=\"line\"><span class=\"addition\">+      &#125;</span></span><br><span class=\"line\"><span class=\"addition\">+    &#125;,</span></span><br><span class=\"line\"><span class=\"addition\">+    &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+      loader: path.resolve(__dirname, './md-loader/index.js')</span></span><br><span class=\"line\"><span class=\"addition\">+    &#125;</span></span><br><span class=\"line\"><span class=\"addition\">+  ]</span></span><br><span class=\"line\"><span class=\"addition\">+&#125;</span></span><br></pre></td></tr></table></figure></div>\n<h2 id=\"搭建运行环境的-vue-页面\"><a href=\"#搭建运行环境的-vue-页面\" class=\"headerlink\" title=\"搭建运行环境的 vue 页面\"></a>搭建运行环境的 vue 页面</h2><p>修改<code>website</code>下的配置，变成一个完整的 demo 页</p>\n<h3 id=\"创建单页面组件\"><a href=\"#创建单页面组件\" class=\"headerlink\" title=\"创建单页面组件\"></a>创建单页面组件</h3><p>新建<code>components</code>文件夹，添加组件</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd website</span><br><span class=\"line\">mkdir Container DemoBlock Header Nav</span><br></pre></td></tr></table></figure></div>\n<p>其中Container 是文档主要内容区域， Header 是文档头部，Nav 是文档侧边导航， DemoBlock是 vue 源码编译为 demo 的组件，现在除了 DemoBlock 外，其他组件暂时没有具体实现，以后在慢慢补充。代码也过于冗长，不贴出来了，可以下载来看。</p>\n<h3 id=\"修改文件\"><a href=\"#修改文件\" class=\"headerlink\" title=\"修改文件\"></a>修改文件</h3><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">DIFF</span></header><figure class=\"iseeu highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\"><span class=\"deletion\">-  &lt;div class=\"app\"&gt;</span></span><br><span class=\"line\"><span class=\"deletion\">-    &lt;Hello :name=\"name\" /&gt;</span></span><br><span class=\"line\"><span class=\"deletion\">-  &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+  &lt;Header /&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+  &lt;section class=\"content-wrapper\"&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+    &lt;Nav class=\"menu-bar\" /&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+    &lt;Container class=\"content\"&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+      &lt;router-view /&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+    &lt;/Container&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+  &lt;/section&gt;</span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script lang=\"ts\"&gt;</span><br><span class=\"line\">import &#123; defineComponent, reactive, toRefs &#125; from 'vue'</span><br><span class=\"line\"><span class=\"addition\">+import Header from './components/Header/index.vue'</span></span><br><span class=\"line\"><span class=\"addition\">+import Nav from './components/Nav/index.vue'</span></span><br><span class=\"line\"><span class=\"addition\">+import Container from './components/Container/index.vue'</span></span><br><span class=\"line\"></span><br><span class=\"line\">export default defineComponent(&#123;</span><br><span class=\"line\">  name: 'App',</span><br><span class=\"line\"><span class=\"addition\">+  components: &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+    Header,</span></span><br><span class=\"line\"><span class=\"addition\">+    Nav,</span></span><br><span class=\"line\"><span class=\"addition\">+    Container</span></span><br><span class=\"line\"><span class=\"addition\">+  &#125;,</span></span><br><span class=\"line\">  setup() &#123;</span><br><span class=\"line\">    const state = reactive(&#123; name: 'admin ui' &#125;)</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      ...toRefs(state)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"addition\">+&lt;style lang=\"scss\" scoped&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+.content-wrapper &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+  display: flex;</span></span><br><span class=\"line\"><span class=\"addition\">+  overflow: hidden;</span></span><br><span class=\"line\"><span class=\"addition\">+  flex: 1;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"addition\">+  .menu-bar &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+    width: 200px;</span></span><br><span class=\"line\"><span class=\"addition\">+    color: #fff;</span></span><br><span class=\"line\"><span class=\"addition\">+    background: red;</span></span><br><span class=\"line\"><span class=\"addition\">+  &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"addition\">+  .content &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+    flex: 1;</span></span><br><span class=\"line\"><span class=\"addition\">+  &#125;</span></span><br><span class=\"line\"><span class=\"addition\">+&#125;</span></span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"创建路由\"><a href=\"#创建路由\" class=\"headerlink\" title=\"创建路由\"></a>创建路由</h3><p>website 下新建 <code>nav.config.ts</code></p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; getLang &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./utils/lang'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> localLang = getLang()</span><br><span class=\"line\"><span class=\"keyword\">const</span> componentsString = localLang === <span class=\"string\">'en-US'</span> ? <span class=\"string\">'Components'</span> : <span class=\"string\">'组件'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> baseComponentsString = localLang === <span class=\"string\">'en-US'</span> ? <span class=\"string\">'Base Components'</span> : <span class=\"string\">'基础组件'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> navs = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: componentsString,</span><br><span class=\"line\">    groups: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        groupName: baseComponentsString,</span><br><span class=\"line\">        list: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            path: <span class=\"string\">'/button'</span>,</span><br><span class=\"line\">            name: <span class=\"string\">'Button'</span>,</span><br><span class=\"line\">            component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (localLang === <span class=\"string\">'en-US'</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./markdown/en-US/button.md'</span>)</span><br><span class=\"line\">              &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./markdown/zh-CN/button.md'</span>)</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></div>\n<p>创建 <code>utils/lang.ts</code></p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">TS</span></header><figure class=\"iseeu highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">let</span> curLang = <span class=\"built_in\">window</span>.sessionStorage.getItem(<span class=\"string\">'lang'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> langTransformMap = &#123;</span><br><span class=\"line\">  zh: <span class=\"string\">'zh-CN'</span>,</span><br><span class=\"line\">  en: <span class=\"string\">'en-US'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setLang</span>(<span class=\"params\">langType</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">window</span>.sessionStorage.setItem(<span class=\"string\">'lang'</span>, langType)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">transformLang</span>(<span class=\"params\">originalLang</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> langTransform = langTransformMap[originalLang]</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (langTransform === <span class=\"literal\">undefined</span>) langTransform = originalLang</span><br><span class=\"line\">  curLang = langTransform</span><br><span class=\"line\">  <span class=\"keyword\">return</span> langTransform</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getLang</span>(<span class=\"params\">lang?: <span class=\"built_in\">string</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (curLang == <span class=\"literal\">null</span> || curLang === <span class=\"string\">''</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> langTransform = transformLang(<span class=\"built_in\">window</span>.sessionStorage.getItem(<span class=\"string\">'lang'</span>) || navigator.language)</span><br><span class=\"line\">    setLang(langTransform)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> langTransform</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> lang ? <span class=\"built_in\">window</span>.sessionStorage.getItem(<span class=\"string\">'lang'</span>) || navigator.language : curLang</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<p>新建<code>router/index.ts</code></p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createRouter, createWebHashHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue-router'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; nextTick &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> hljs <span class=\"keyword\">from</span> <span class=\"string\">'highlight.js'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; navs &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../nav.config'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> indexRoute = [</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> componentRoutes = []</span><br><span class=\"line\"></span><br><span class=\"line\">navs.forEach(<span class=\"function\"><span class=\"params\">navItem</span> =&gt;</span> &#123;</span><br><span class=\"line\">  navItem.groups.forEach(<span class=\"function\"><span class=\"params\">groupItem</span> =&gt;</span> &#123;</span><br><span class=\"line\">    groupItem.list.forEach(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (item.path !== <span class=\"string\">'/'</span>) &#123;</span><br><span class=\"line\">        componentRoutes.push(&#123;</span><br><span class=\"line\">          path: item.path,</span><br><span class=\"line\">          name: item.path.slice(<span class=\"number\">1</span>),</span><br><span class=\"line\">          meta: &#123;</span><br><span class=\"line\">            name: item.path.slice(<span class=\"number\">1</span>)</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          component: item.component</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> routes = [...indexRoute, ...componentRoutes]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = createRouter(&#123;</span><br><span class=\"line\">  history: createWebHashHistory(),</span><br><span class=\"line\">  routes: routes</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">router.afterEach(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  nextTick(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> blocks = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'pre code:not(.hljs)'</span>)</span><br><span class=\"line\">    <span class=\"built_in\">Array</span>.prototype.forEach.call(blocks, hljs.highlightBlock)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> router</span><br></pre></td></tr></table></figure></div>\n<p>创建 css 文件，修改页面样式</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">CSS</span></header><figure class=\"iseeu highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* website/styles/common.scss */</span></span><br><span class=\"line\"><span class=\"selector-tag\">html</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">'Helvetica Neue'</span>, Helvetica, <span class=\"string\">'PingFang SC'</span>, <span class=\"string\">'Hiragino Sans GB'</span>, <span class=\"string\">'Microsoft YaHei'</span>,</span><br><span class=\"line\">    SimSun, sans-serif;</span><br><span class=\"line\">  <span class=\"attribute\">-webkit-font-smoothing</span>: antialiased;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: <span class=\"number\">400</span>;</span><br><span class=\"line\">  <span class=\"attribute\">-webkit-tap-highlight-color</span>: transparent;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#app</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">  <span class=\"attribute\">flex-direction</span>: column;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#409eff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">code</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> <span class=\"number\">4px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#f9fafc</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#eaeefb</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">4px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">button</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">input</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">select</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">textarea</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: inherit;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: inherit;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: inherit;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: inherit;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.hljs</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">18px</span> <span class=\"number\">24px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">25px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: Menlo, Monaco, Consolas, Courier, monospace;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">-webkit-font-smoothing</span>: auto;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">1.8</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#fafafa</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: solid <span class=\"number\">1px</span> <span class=\"number\">#eaeefb</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">4px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.demo</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">20px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<p>修改<code>main.ts</code></p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">DIFF</span></header><figure class=\"iseeu highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; createApp &#125; from 'vue'</span><br><span class=\"line\">import App from './app.vue'</span><br><span class=\"line\">import AdminUI from '../packages/admin-ui'</span><br><span class=\"line\"><span class=\"addition\">+import 'highlight.js/styles/color-brewer.css' // 代码块高亮主题，多种主题可选择</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"addition\">+import router from './router'</span></span><br><span class=\"line\"><span class=\"addition\">+import DemoBlock from './components/DemoBlock/index.vue'</span></span><br><span class=\"line\"><span class=\"addition\">+import './styles/common.scss'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"deletion\">-createApp(App).use(AdminUI).mount('#app')</span></span><br><span class=\"line\"><span class=\"addition\">+createApp(App).use(AdminUI).component('demo-block', DemoBlock).use(router).mount('#app')</span></span><br></pre></td></tr></table></figure></div>\n<h3 id=\"添加枚举类型\"><a href=\"#添加枚举类型\" class=\"headerlink\" title=\"添加枚举类型\"></a>添加枚举类型</h3><p>新建 enums 文件夹，用来存放项目的枚举类型，目前只有语言类型需要保存</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">TS</span></header><figure class=\"iseeu highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">enum</span> Language &#123;</span><br><span class=\"line\">  <span class=\"comment\">/** Chinese */</span></span><br><span class=\"line\">  CN = <span class=\"string\">'zh-CN'</span>,</span><br><span class=\"line\">  <span class=\"comment\">/** English */</span></span><br><span class=\"line\">  EN = <span class=\"string\">'en-US'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<h2 id=\"修改packages-amp-amp-编写文档\"><a href=\"#修改packages-amp-amp-编写文档\" class=\"headerlink\" title=\"修改packages &amp;&amp; 编写文档\"></a>修改packages &amp;&amp; 编写文档</h2><p>例子中，我定义了<code>button</code>组件，然后新建<code>markdown</code>文件夹，创建相应的语言文件夹，分别创建<code>button.md</code>，然后编写文档，就完成了。这里有几点要注意：</p>\n<ul>\n<li><code>:::demo demo-desc</code>是固定的语法，一定要这样写，下面的源码才会被编译成示例</li>\n<li>示例中的<code>dt-button</code>，对应的是 button 组件中，vue 的 name</li>\n</ul>\n<h2 id=\"增加-build-docs命令\"><a href=\"#增加-build-docs命令\" class=\"headerlink\" title=\"增加 build:docs命令\"></a>增加 build:docs命令</h2><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"script\": &#123;</span><br><span class=\"line\">+  \"build:docs\": \"webpack --config build/webpack.config.dev.js\"</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n","more":"<h2 id=\"写在前面\"><a href=\"#写在前面\" class=\"headerlink\" title=\"写在前面\"></a>写在前面</h2><p>接上一篇，这篇说的是使用<code>markdown</code>作为开发文档，原本想的是直接使用<code>vuepress</code>加入进来，万万没想到它不支持<code>vue3</code>，而新的<code>vuepress@next</code>功能还未完善，试过之后不太理想，所以还是照着<code>element-plus</code>来吧</p>\n<blockquote>\n<p>在参考和查找的过程中，无意间发现了一个类似的仓库：<a href=\"https://github.com/ninecat-ui/ninecat-ui\" target=\"_blank\" rel=\"noopener\">ninecat-ui</a>,所以这篇文档在 element 基础上，也参照了部分 ninecat-ui 的思路（当然主要还是 element）</p>\n</blockquote>\n<h2 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h2><h3 id=\"markdown-相关依赖\"><a href=\"#markdown-相关依赖\" class=\"headerlink\" title=\"markdown 相关依赖\"></a>markdown 相关依赖</h3><p>安装解析 markdown 语法的依赖</p>\n<p><code>yarn add -D highlight.js markdown-it markdown-it-anchor markdown-it-chain markdown-it-container transliteration -W</code></p>\n<h3 id=\"vue-相关依赖\"><a href=\"#vue-相关依赖\" class=\"headerlink\" title=\"vue 相关依赖\"></a>vue 相关依赖</h3><p>本地开发文档自然需要设置路由，后面可能会需要补全国际化，还要提前安装好 i18n。<code>yarn add -D vue-router@next vue-i18n@next -W</code></p>\n<h2 id=\"修改-webpack-配置\"><a href=\"#修改-webpack-配置\" class=\"headerlink\" title=\"修改 webpack 配置\"></a>修改 webpack 配置</h2><h3 id=\"修改-css-rules\"><a href=\"#修改-css-rules\" class=\"headerlink\" title=\"修改 css rules\"></a>修改 css rules</h3><p>之前写的疏忽，loader 里没有包含 <code>css</code>文件，导致了一些问题，首先修复</p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// build/webpack.config.base.js</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"><span class=\"deletion\">-  test: /\\.scss$/,</span></span><br><span class=\"line\"><span class=\"addition\">+  test: /\\.(css|sass|scss)$/,</span></span><br><span class=\"line\">  use: [</span><br><span class=\"line\">    &#123; loader: 'style-loader' &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      loader: 'css-loader',</span><br><span class=\"line\">      options: &#123; sourceMap: true &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      loader: 'sass-loader'</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure>\n<h3 id=\"添加解析-markdown-的-loader\"><a href=\"#添加解析-markdown-的-loader\" class=\"headerlink\" title=\"添加解析 markdown 的 loader\"></a>添加解析 markdown 的 loader</h3><blockquote>\n<p>说来惭愧，这个 loader 我现在还是很茫然，因为是从 element-plus 粘贴来的。并不清楚为什么要这么配置，需要后面再仔细学习一下</p>\n</blockquote>\n<h4 id=\"创建-markdown-loader\"><a href=\"#创建-markdown-loader\" class=\"headerlink\" title=\"创建 markdown-loader\"></a>创建 markdown-loader</h4><p>build 文件夹中创建 md-loader 文件夹，新建<code>config.js</code>、<code>container.js</code>、 <code>fence.js</code>、 <code>index.js</code>、<code>util.js</code>作为 md-loader 配置</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* config.js */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> Config = <span class=\"built_in\">require</span>(<span class=\"string\">'markdown-it-chain'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> anchorPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'markdown-it-anchor'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> slugify = <span class=\"built_in\">require</span>(<span class=\"string\">'transliteration'</span>).slugify</span><br><span class=\"line\"><span class=\"keyword\">const</span> hljs = <span class=\"built_in\">require</span>(<span class=\"string\">'highlight.js'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> containers = <span class=\"built_in\">require</span>(<span class=\"string\">'./containers'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> overWriteFenceRule = <span class=\"built_in\">require</span>(<span class=\"string\">'./fence'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> config = <span class=\"keyword\">new</span> Config()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> highlight = <span class=\"function\">(<span class=\"params\">str, lang</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!lang || !hljs.getLanguage(lang)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'&lt;pre&gt;&lt;code class=\"hljs\"&gt;'</span> + str + <span class=\"string\">'&lt;/code&gt;&lt;/pre&gt;'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> html = hljs.highlight(lang, str, <span class=\"literal\">true</span>, <span class=\"literal\">undefined</span>).value</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">`&lt;pre&gt;&lt;code class=\"hljs language-<span class=\"subst\">$&#123;lang&#125;</span>\"&gt;<span class=\"subst\">$&#123;html&#125;</span>&lt;/code&gt;&lt;/pre&gt;`</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">config.options</span><br><span class=\"line\">  .html(<span class=\"literal\">true</span>)</span><br><span class=\"line\">  .highlight(highlight)</span><br><span class=\"line\">  .end()</span><br><span class=\"line\"></span><br><span class=\"line\">  .plugin(<span class=\"string\">'anchor'</span>)</span><br><span class=\"line\">  .use(anchorPlugin, [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      level: <span class=\"number\">2</span>,</span><br><span class=\"line\">      slugify: slugify,</span><br><span class=\"line\">      permalink: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      permalinkBefore: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      <span class=\"comment\">// permalinkSymbol: '#'</span></span><br><span class=\"line\">      permalinkSymbol: <span class=\"string\">''</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ])</span><br><span class=\"line\">  .end()</span><br><span class=\"line\"></span><br><span class=\"line\">  .plugin(<span class=\"string\">'containers'</span>)</span><br><span class=\"line\">  .use(containers)</span><br><span class=\"line\">  .end()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> md = config.toMd()</span><br><span class=\"line\">overWriteFenceRule(md)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = md</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// --------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* containers.js */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> mdContainer = <span class=\"built_in\">require</span>(<span class=\"string\">'markdown-it-container'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"params\">md</span> =&gt;</span> &#123;</span><br><span class=\"line\">  md.use(mdContainer, <span class=\"string\">'demo'</span>, &#123;</span><br><span class=\"line\">    validate(params) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> params.trim().match(<span class=\"regexp\">/^demo\\s*(.*)$/</span>)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    render(tokens, idx) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> m = tokens[idx].info.trim().match(<span class=\"regexp\">/^demo\\s*(.*)$/</span>)</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (tokens[idx].nesting === <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> description = m &amp;&amp; m.length &gt; <span class=\"number\">1</span> ? m[<span class=\"number\">1</span>] : <span class=\"string\">''</span></span><br><span class=\"line\">        <span class=\"keyword\">const</span> content = tokens[idx + <span class=\"number\">1</span>].type === <span class=\"string\">'fence'</span> ? tokens[idx + <span class=\"number\">1</span>].content : <span class=\"string\">''</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">`&lt;demo-block&gt;</span></span><br><span class=\"line\"><span class=\"string\">        <span class=\"subst\">$&#123;description ? <span class=\"string\">`&lt;div&gt;<span class=\"subst\">$&#123;md.render(description)&#125;</span>&lt;/div&gt;`</span> : <span class=\"string\">''</span>&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">        &lt;!--admin-demo: <span class=\"subst\">$&#123;content&#125;</span>:admin-demo--&gt;</span></span><br><span class=\"line\"><span class=\"string\">        `</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'&lt;/demo-block&gt;'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  md.use(mdContainer, <span class=\"string\">'tip'</span>)</span><br><span class=\"line\">  md.use(mdContainer, <span class=\"string\">'warning'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// --------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* fence.js */</span></span><br><span class=\"line\"><span class=\"comment\">// 覆盖默认的 fence 渲染策略</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"params\">md</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> defaultRender = md.renderer.rules.fence</span><br><span class=\"line\">  md.renderer.rules.fence = <span class=\"function\">(<span class=\"params\">tokens, idx, options, env, self</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> token = tokens[idx]</span><br><span class=\"line\">    <span class=\"comment\">// 判断该 fence 是否在 :::demo 内</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> prevToken = tokens[idx - <span class=\"number\">1</span>]</span><br><span class=\"line\">    <span class=\"keyword\">const</span> isInDemoContainer =</span><br><span class=\"line\">      prevToken &amp;&amp; prevToken.nesting === <span class=\"number\">1</span> &amp;&amp; prevToken.info.trim().match(<span class=\"regexp\">/^demo\\s*(.*)$/</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (token.info === <span class=\"string\">'html'</span> &amp;&amp; isInDemoContainer) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">`&lt;template #highlight&gt;&lt;pre v-pre&gt;&lt;code class=\"html\"&gt;<span class=\"subst\">$&#123;md.utils.escapeHtml(</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">        token.content</span></span></span><br><span class=\"line\"><span class=\"string\"><span class=\"subst\">      )&#125;</span>&lt;/code&gt;&lt;/pre&gt;&lt;/template&gt;`</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> defaultRender(tokens, idx, options, env, self)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// --------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* index.js */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; stripScript, stripTemplate, genInlineComponentText &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'./util'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> md = <span class=\"built_in\">require</span>(<span class=\"string\">'./config'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">source</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> content = md.render(source)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> startTag = <span class=\"string\">'&lt;!--admin-demo:'</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> startTagLen = startTag.length</span><br><span class=\"line\">  <span class=\"keyword\">const</span> endTag = <span class=\"string\">':admin-demo--&gt;'</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> endTagLen = endTag.length</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> componenetsString = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> id = <span class=\"number\">0</span> <span class=\"comment\">// demo 的 id</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> output = [] <span class=\"comment\">// 输出的内容</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> start = <span class=\"number\">0</span> <span class=\"comment\">// 字符串开始位置</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> commentStart = content.indexOf(startTag)</span><br><span class=\"line\">  <span class=\"keyword\">let</span> commentEnd = content.indexOf(endTag, commentStart + startTagLen)</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (commentStart !== <span class=\"number\">-1</span> &amp;&amp; commentEnd !== <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">    output.push(content.slice(start, commentStart))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> commentContent = content.slice(commentStart + startTagLen, commentEnd)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> html = stripTemplate(commentContent)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> script = stripScript(commentContent)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> demoComponentContent = genInlineComponentText(html, script)</span><br><span class=\"line\">    <span class=\"keyword\">const</span> demoComponentName = <span class=\"string\">`admin-demo<span class=\"subst\">$&#123;id&#125;</span>`</span></span><br><span class=\"line\">    output.push(<span class=\"string\">`&lt;template #source&gt;&lt;<span class=\"subst\">$&#123;demoComponentName&#125;</span> /&gt;&lt;/template&gt;`</span>)</span><br><span class=\"line\">    componenetsString += <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">JSON</span>.stringify(demoComponentName)&#125;</span>: <span class=\"subst\">$&#123;demoComponentContent&#125;</span>,`</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 重新计算下一次的位置</span></span><br><span class=\"line\">    id++</span><br><span class=\"line\">    start = commentEnd + endTagLen</span><br><span class=\"line\">    commentStart = content.indexOf(startTag, start)</span><br><span class=\"line\">    commentEnd = content.indexOf(endTag, commentStart + startTagLen)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// 仅允许在 demo 不存在时，才可以在 Markdown 中写 script 标签</span></span><br><span class=\"line\">  <span class=\"comment\">// todo: 优化这段逻辑</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">let</span> pageScript = <span class=\"string\">''</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (componenetsString) &#123;</span><br><span class=\"line\">    pageScript = <span class=\"string\">`&lt;script lang=\"ts\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">      import * as Vue from 'vue';</span></span><br><span class=\"line\"><span class=\"string\">      export default &#123;</span></span><br><span class=\"line\"><span class=\"string\">        name: 'component-doc',</span></span><br><span class=\"line\"><span class=\"string\">        components: &#123;</span></span><br><span class=\"line\"><span class=\"string\">          <span class=\"subst\">$&#123;componenetsString&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">        &#125;</span></span><br><span class=\"line\"><span class=\"string\">      &#125;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;/script&gt;`</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (content.indexOf(<span class=\"string\">'&lt;script&gt;'</span>) === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// 硬编码，有待改善</span></span><br><span class=\"line\">    start = content.indexOf(<span class=\"string\">'&lt;/script&gt;'</span>) + <span class=\"string\">'&lt;/script&gt;'</span>.length</span><br><span class=\"line\">    pageScript = content.slice(<span class=\"number\">0</span>, start)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  output.push(content.slice(start))</span><br><span class=\"line\">  <span class=\"keyword\">const</span> result = <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  &lt;template&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;section class=\"content admin-doc\"&gt;</span></span><br><span class=\"line\"><span class=\"string\">      <span class=\"subst\">$&#123;output.join(<span class=\"string\">''</span>)&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">    &lt;/section&gt;</span></span><br><span class=\"line\"><span class=\"string\">  &lt;/template&gt;</span></span><br><span class=\"line\"><span class=\"string\">  <span class=\"subst\">$&#123;pageScript&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> result</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// --------------------------------------------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* util.js */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; compileTemplate, TemplateCompiler &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'@vue/compiler-sfc'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stripScript</span>(<span class=\"params\">content</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> result = content.match(<span class=\"regexp\">/&lt;(script)&gt;([\\s\\S]+)&lt;\\/\\1&gt;/</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result &amp;&amp; result[<span class=\"number\">2</span>] ? result[<span class=\"number\">2</span>].trim() : <span class=\"string\">''</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stripStyle</span>(<span class=\"params\">content</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> result = content.match(<span class=\"regexp\">/&lt;(style)\\s*&gt;([\\s\\S]+)&lt;\\/\\1&gt;/</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result &amp;&amp; result[<span class=\"number\">2</span>] ? result[<span class=\"number\">2</span>].trim() : <span class=\"string\">''</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 编写例子时不一定有 template。所以采取的方案是剔除其他的内容</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stripTemplate</span>(<span class=\"params\">content</span>) </span>&#123;</span><br><span class=\"line\">  content = content.trim()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!content) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> content</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> content.replace(<span class=\"regexp\">/&lt;(script|style)[\\s\\S]+&lt;\\/\\1&gt;/g</span>, <span class=\"string\">''</span>).trim()</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pad</span>(<span class=\"params\">source</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> source</span><br><span class=\"line\">    .split(<span class=\"regexp\">/\\r?\\n/</span>)</span><br><span class=\"line\">    .map(<span class=\"function\"><span class=\"params\">line</span> =&gt;</span> <span class=\"string\">`  <span class=\"subst\">$&#123;line&#125;</span>`</span>)</span><br><span class=\"line\">    .join(<span class=\"string\">'\\n'</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> templateReplaceRegex = <span class=\"regexp\">/&lt;template&gt;([\\s\\S]+)&lt;\\/template&gt;/g</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">genInlineComponentText</span>(<span class=\"params\">template, script</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// https://github.com/vuejs/vue-loader/blob/423b8341ab368c2117931e909e2da9af74503635/lib/loaders/templateLoader.js#L46</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> source = template</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (templateReplaceRegex.test(source)) &#123;</span><br><span class=\"line\">    source = source.replace(templateReplaceRegex, <span class=\"string\">'$1'</span>)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> finalOptions = &#123;</span><br><span class=\"line\">    source: <span class=\"string\">`&lt;div&gt;<span class=\"subst\">$&#123;source&#125;</span>&lt;/div&gt;`</span>,</span><br><span class=\"line\">    filename: <span class=\"string\">'inline-component'</span>,</span><br><span class=\"line\">    compiler: TemplateCompiler,</span><br><span class=\"line\">    compilerOptions: &#123;</span><br><span class=\"line\">      mode: <span class=\"string\">'function'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> compiled = compileTemplate(finalOptions)</span><br><span class=\"line\">  <span class=\"comment\">// tips</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (compiled.tips &amp;&amp; compiled.tips.length) &#123;</span><br><span class=\"line\">    compiled.tips.forEach(<span class=\"function\"><span class=\"params\">tip</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.warn(tip)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// errors</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (compiled.errors &amp;&amp; compiled.errors.length) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(</span><br><span class=\"line\">      <span class=\"string\">`\\n  Error compiling template:\\n<span class=\"subst\">$&#123;pad(compiled.source)&#125;</span>\\n`</span> +</span><br><span class=\"line\">        compiled.errors.map(<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> <span class=\"string\">`  - <span class=\"subst\">$&#123;e&#125;</span>`</span>).join(<span class=\"string\">'\\n'</span>) +</span><br><span class=\"line\">        <span class=\"string\">'\\n'</span></span><br><span class=\"line\">    )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> demoComponentContent = <span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    <span class=\"subst\">$&#123;compiled.code.replace(<span class=\"string\">'return function render'</span>, <span class=\"string\">'function render'</span>)&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">  `</span></span><br><span class=\"line\">  <span class=\"comment\">// todo: 这里采用了硬编码有待改进</span></span><br><span class=\"line\">  script = script.trim()</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (script) &#123;</span><br><span class=\"line\">    script = script</span><br><span class=\"line\">      .replace(<span class=\"regexp\">/export\\s+default/</span>, <span class=\"string\">'const democomponentExport ='</span>)</span><br><span class=\"line\">      .replace(<span class=\"regexp\">/import (&#123;.*&#125;) from 'vue'/g</span>, (s, s1) =&gt; <span class=\"string\">`const <span class=\"subst\">$&#123;s1&#125;</span> = Vue`</span>)</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    script = <span class=\"string\">'const democomponentExport = &#123;&#125;'</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  demoComponentContent = <span class=\"string\">`(function() &#123;</span></span><br><span class=\"line\"><span class=\"string\">    <span class=\"subst\">$&#123;demoComponentContent&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">    <span class=\"subst\">$&#123;script&#125;</span></span></span><br><span class=\"line\"><span class=\"string\">    return &#123;</span></span><br><span class=\"line\"><span class=\"string\">      render,</span></span><br><span class=\"line\"><span class=\"string\">      ...democomponentExport</span></span><br><span class=\"line\"><span class=\"string\">    &#125;</span></span><br><span class=\"line\"><span class=\"string\">  &#125;)()`</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> demoComponentContent</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  stripScript,</span><br><span class=\"line\">  stripStyle,</span><br><span class=\"line\">  stripTemplate,</span><br><span class=\"line\">  genInlineComponentText</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"添加-md-loader-配置\"><a href=\"#添加-md-loader-配置\" class=\"headerlink\" title=\"添加 md-loader 配置\"></a>添加 md-loader 配置</h4><p><code>webpack.config.base.js</code>添加 markdown 规则</p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"addition\">+&#123;</span></span><br><span class=\"line\"><span class=\"addition\">+  test: /\\.md$/,</span></span><br><span class=\"line\"><span class=\"addition\">+  use: [</span></span><br><span class=\"line\"><span class=\"addition\">+    &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+      loader: 'vue-loader',</span></span><br><span class=\"line\"><span class=\"addition\">+      options: &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+        compilerOptions: &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+          preserveWhitespace: false</span></span><br><span class=\"line\"><span class=\"addition\">+        &#125;</span></span><br><span class=\"line\"><span class=\"addition\">+      &#125;</span></span><br><span class=\"line\"><span class=\"addition\">+    &#125;,</span></span><br><span class=\"line\"><span class=\"addition\">+    &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+      loader: path.resolve(__dirname, './md-loader/index.js')</span></span><br><span class=\"line\"><span class=\"addition\">+    &#125;</span></span><br><span class=\"line\"><span class=\"addition\">+  ]</span></span><br><span class=\"line\"><span class=\"addition\">+&#125;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"搭建运行环境的-vue-页面\"><a href=\"#搭建运行环境的-vue-页面\" class=\"headerlink\" title=\"搭建运行环境的 vue 页面\"></a>搭建运行环境的 vue 页面</h2><p>修改<code>website</code>下的配置，变成一个完整的 demo 页</p>\n<h3 id=\"创建单页面组件\"><a href=\"#创建单页面组件\" class=\"headerlink\" title=\"创建单页面组件\"></a>创建单页面组件</h3><p>新建<code>components</code>文件夹，添加组件</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd website</span><br><span class=\"line\">mkdir Container DemoBlock Header Nav</span><br></pre></td></tr></table></figure>\n<p>其中Container 是文档主要内容区域， Header 是文档头部，Nav 是文档侧边导航， DemoBlock是 vue 源码编译为 demo 的组件，现在除了 DemoBlock 外，其他组件暂时没有具体实现，以后在慢慢补充。代码也过于冗长，不贴出来了，可以下载来看。</p>\n<h3 id=\"修改文件\"><a href=\"#修改文件\" class=\"headerlink\" title=\"修改文件\"></a>修改文件</h3><figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\"><span class=\"deletion\">-  &lt;div class=\"app\"&gt;</span></span><br><span class=\"line\"><span class=\"deletion\">-    &lt;Hello :name=\"name\" /&gt;</span></span><br><span class=\"line\"><span class=\"deletion\">-  &lt;/div&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+  &lt;Header /&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+  &lt;section class=\"content-wrapper\"&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+    &lt;Nav class=\"menu-bar\" /&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+    &lt;Container class=\"content\"&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+      &lt;router-view /&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+    &lt;/Container&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+  &lt;/section&gt;</span></span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script lang=\"ts\"&gt;</span><br><span class=\"line\">import &#123; defineComponent, reactive, toRefs &#125; from 'vue'</span><br><span class=\"line\"><span class=\"addition\">+import Header from './components/Header/index.vue'</span></span><br><span class=\"line\"><span class=\"addition\">+import Nav from './components/Nav/index.vue'</span></span><br><span class=\"line\"><span class=\"addition\">+import Container from './components/Container/index.vue'</span></span><br><span class=\"line\"></span><br><span class=\"line\">export default defineComponent(&#123;</span><br><span class=\"line\">  name: 'App',</span><br><span class=\"line\"><span class=\"addition\">+  components: &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+    Header,</span></span><br><span class=\"line\"><span class=\"addition\">+    Nav,</span></span><br><span class=\"line\"><span class=\"addition\">+    Container</span></span><br><span class=\"line\"><span class=\"addition\">+  &#125;,</span></span><br><span class=\"line\">  setup() &#123;</span><br><span class=\"line\">    const state = reactive(&#123; name: 'admin ui' &#125;)</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      ...toRefs(state)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"addition\">+&lt;style lang=\"scss\" scoped&gt;</span></span><br><span class=\"line\"><span class=\"addition\">+.content-wrapper &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+  display: flex;</span></span><br><span class=\"line\"><span class=\"addition\">+  overflow: hidden;</span></span><br><span class=\"line\"><span class=\"addition\">+  flex: 1;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"addition\">+  .menu-bar &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+    width: 200px;</span></span><br><span class=\"line\"><span class=\"addition\">+    color: #fff;</span></span><br><span class=\"line\"><span class=\"addition\">+    background: red;</span></span><br><span class=\"line\"><span class=\"addition\">+  &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"addition\">+  .content &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+    flex: 1;</span></span><br><span class=\"line\"><span class=\"addition\">+  &#125;</span></span><br><span class=\"line\"><span class=\"addition\">+&#125;</span></span><br><span class=\"line\">&lt;/style&gt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"创建路由\"><a href=\"#创建路由\" class=\"headerlink\" title=\"创建路由\"></a>创建路由</h3><p>website 下新建 <code>nav.config.ts</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; getLang &#125; <span class=\"keyword\">from</span> <span class=\"string\">'./utils/lang'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> localLang = getLang()</span><br><span class=\"line\"><span class=\"keyword\">const</span> componentsString = localLang === <span class=\"string\">'en-US'</span> ? <span class=\"string\">'Components'</span> : <span class=\"string\">'组件'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> baseComponentsString = localLang === <span class=\"string\">'en-US'</span> ? <span class=\"string\">'Base Components'</span> : <span class=\"string\">'基础组件'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> navs = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    name: componentsString,</span><br><span class=\"line\">    groups: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        groupName: baseComponentsString,</span><br><span class=\"line\">        list: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            path: <span class=\"string\">'/button'</span>,</span><br><span class=\"line\">            name: <span class=\"string\">'Button'</span>,</span><br><span class=\"line\">            component: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (localLang === <span class=\"string\">'en-US'</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./markdown/en-US/button.md'</span>)</span><br><span class=\"line\">              &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">import</span>(<span class=\"string\">'./markdown/zh-CN/button.md'</span>)</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure>\n<p>创建 <code>utils/lang.ts</code></p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">let</span> curLang = <span class=\"built_in\">window</span>.sessionStorage.getItem(<span class=\"string\">'lang'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> langTransformMap = &#123;</span><br><span class=\"line\">  zh: <span class=\"string\">'zh-CN'</span>,</span><br><span class=\"line\">  en: <span class=\"string\">'en-US'</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">setLang</span>(<span class=\"params\">langType</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">window</span>.sessionStorage.setItem(<span class=\"string\">'lang'</span>, langType)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">transformLang</span>(<span class=\"params\">originalLang</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> langTransform = langTransformMap[originalLang]</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (langTransform === <span class=\"literal\">undefined</span>) langTransform = originalLang</span><br><span class=\"line\">  curLang = langTransform</span><br><span class=\"line\">  <span class=\"keyword\">return</span> langTransform</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getLang</span>(<span class=\"params\">lang?: <span class=\"built_in\">string</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (curLang == <span class=\"literal\">null</span> || curLang === <span class=\"string\">''</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> langTransform = transformLang(<span class=\"built_in\">window</span>.sessionStorage.getItem(<span class=\"string\">'lang'</span>) || navigator.language)</span><br><span class=\"line\">    setLang(langTransform)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> langTransform</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> lang ? <span class=\"built_in\">window</span>.sessionStorage.getItem(<span class=\"string\">'lang'</span>) || navigator.language : curLang</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>新建<code>router/index.ts</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createRouter, createWebHashHistory &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue-router'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; nextTick &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> hljs <span class=\"keyword\">from</span> <span class=\"string\">'highlight.js'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; navs &#125; <span class=\"keyword\">from</span> <span class=\"string\">'../nav.config'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> indexRoute = [</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> componentRoutes = []</span><br><span class=\"line\"></span><br><span class=\"line\">navs.forEach(<span class=\"function\"><span class=\"params\">navItem</span> =&gt;</span> &#123;</span><br><span class=\"line\">  navItem.groups.forEach(<span class=\"function\"><span class=\"params\">groupItem</span> =&gt;</span> &#123;</span><br><span class=\"line\">    groupItem.list.forEach(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (item.path !== <span class=\"string\">'/'</span>) &#123;</span><br><span class=\"line\">        componentRoutes.push(&#123;</span><br><span class=\"line\">          path: item.path,</span><br><span class=\"line\">          name: item.path.slice(<span class=\"number\">1</span>),</span><br><span class=\"line\">          meta: &#123;</span><br><span class=\"line\">            name: item.path.slice(<span class=\"number\">1</span>)</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          component: item.component</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> routes = [...indexRoute, ...componentRoutes]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> router = createRouter(&#123;</span><br><span class=\"line\">  history: createWebHashHistory(),</span><br><span class=\"line\">  routes: routes</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">router.afterEach(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">  nextTick(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> blocks = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'pre code:not(.hljs)'</span>)</span><br><span class=\"line\">    <span class=\"built_in\">Array</span>.prototype.forEach.call(blocks, hljs.highlightBlock)</span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> router</span><br></pre></td></tr></table></figure>\n<p>创建 css 文件，修改页面样式</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* website/styles/common.scss */</span></span><br><span class=\"line\"><span class=\"selector-tag\">html</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">'Helvetica Neue'</span>, Helvetica, <span class=\"string\">'PingFang SC'</span>, <span class=\"string\">'Hiragino Sans GB'</span>, <span class=\"string\">'Microsoft YaHei'</span>,</span><br><span class=\"line\">    SimSun, sans-serif;</span><br><span class=\"line\">  <span class=\"attribute\">-webkit-font-smoothing</span>: antialiased;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: <span class=\"number\">400</span>;</span><br><span class=\"line\">  <span class=\"attribute\">-webkit-tap-highlight-color</span>: transparent;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#app</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: flex;</span><br><span class=\"line\">  <span class=\"attribute\">flex-direction</span>: column;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">a</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#409eff</span>;</span><br><span class=\"line\">  <span class=\"attribute\">text-decoration</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">code</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">0</span> <span class=\"number\">4px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#f9fafc</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#eaeefb</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">4px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">button</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">input</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">select</span>,</span><br><span class=\"line\"><span class=\"selector-tag\">textarea</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: inherit;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: inherit;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: inherit;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: inherit;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.hljs</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">18px</span> <span class=\"number\">24px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin-bottom</span>: <span class=\"number\">25px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: Menlo, Monaco, Consolas, Courier, monospace;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">12px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">-webkit-font-smoothing</span>: auto;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">1.8</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#fafafa</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: solid <span class=\"number\">1px</span> <span class=\"number\">#eaeefb</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">4px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.demo</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">20px</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>修改<code>main.ts</code></p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; createApp &#125; from 'vue'</span><br><span class=\"line\">import App from './app.vue'</span><br><span class=\"line\">import AdminUI from '../packages/admin-ui'</span><br><span class=\"line\"><span class=\"addition\">+import 'highlight.js/styles/color-brewer.css' // 代码块高亮主题，多种主题可选择</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"addition\">+import router from './router'</span></span><br><span class=\"line\"><span class=\"addition\">+import DemoBlock from './components/DemoBlock/index.vue'</span></span><br><span class=\"line\"><span class=\"addition\">+import './styles/common.scss'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"deletion\">-createApp(App).use(AdminUI).mount('#app')</span></span><br><span class=\"line\"><span class=\"addition\">+createApp(App).use(AdminUI).component('demo-block', DemoBlock).use(router).mount('#app')</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"添加枚举类型\"><a href=\"#添加枚举类型\" class=\"headerlink\" title=\"添加枚举类型\"></a>添加枚举类型</h3><p>新建 enums 文件夹，用来存放项目的枚举类型，目前只有语言类型需要保存</p>\n<figure class=\"highlight ts\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">enum</span> Language &#123;</span><br><span class=\"line\">  <span class=\"comment\">/** Chinese */</span></span><br><span class=\"line\">  CN = <span class=\"string\">'zh-CN'</span>,</span><br><span class=\"line\">  <span class=\"comment\">/** English */</span></span><br><span class=\"line\">  EN = <span class=\"string\">'en-US'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"修改packages-amp-amp-编写文档\"><a href=\"#修改packages-amp-amp-编写文档\" class=\"headerlink\" title=\"修改packages &amp;&amp; 编写文档\"></a>修改packages &amp;&amp; 编写文档</h2><p>例子中，我定义了<code>button</code>组件，然后新建<code>markdown</code>文件夹，创建相应的语言文件夹，分别创建<code>button.md</code>，然后编写文档，就完成了。这里有几点要注意：</p>\n<ul>\n<li><code>:::demo demo-desc</code>是固定的语法，一定要这样写，下面的源码才会被编译成示例</li>\n<li>示例中的<code>dt-button</code>，对应的是 button 组件中，vue 的 name</li>\n</ul>\n<h2 id=\"增加-build-docs命令\"><a href=\"#增加-build-docs命令\" class=\"headerlink\" title=\"增加 build:docs命令\"></a>增加 build:docs命令</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"script\": &#123;</span><br><span class=\"line\">+  \"build:docs\": \"webpack --config build/webpack.config.dev.js\"</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":[{"name":"adminUI","path":"api/categories/adminUI.json"}],"tags":[{"name":"vue","path":"api/tags/vue.json"},{"name":"adminUI","path":"api/tags/adminUI.json"}]}