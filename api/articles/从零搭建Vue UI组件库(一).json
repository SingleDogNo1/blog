{"title":"从零搭建Vue UI组件库(一)","slug":"从零搭建Vue UI组件库(一)","date":"2021-04-15T01:55:41.000Z","updated":"2023-06-21T08:55:09.214Z","comments":true,"path":"api/articles/从零搭建Vue UI组件库(一).json","excerpt":null,"covers":null,"content":"<p>Vue3 发布以来,一直在学习, 最近萌生出想要尝试自己搭建组件库的想法,正赶上开发任务不重,就在此尝试一下,一来提升一下能力,二来看能不能搭建成功。</p>\n<p><a href=\"https://github.com/lost-dream/zcm-admin-ui\" target=\"_blank\" rel=\"noopener\">附上仓库地址</a></p>\n<blockquote>\n<p>我的开发是从零搭建，但主要思路和结构参考了<a href=\"https://github.com/element-plus/element-plus\" target=\"_blank\" rel=\"noopener\">element-plus</a>,感谢饿了么团队提供的思路</p>\n</blockquote>\n<h2 id=\"初始化项目\"><a href=\"#初始化项目\" class=\"headerlink\" title=\"初始化项目\"></a>初始化项目</h2><p>因为是从零开始搭建，就不用 vue-cli 了，创建空文件夹开始</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir admin-ui</span><br><span class=\"line\">cd admin-ui &amp;&amp; npm init -y</span><br></pre></td></tr></table></figure></div>\n<p>参照<code>element-plus</code>，项目使用<a href=\"https://github.com/lerna/lerna\" target=\"_blank\" rel=\"noopener\">lerna</a>初始化，它优化了使用 git 和 npm 管理多包存储库的工作流，有兴趣可以研究一下</p>\n<blockquote>\n<p>我也是刚刚接触这个框架，有写错的地方欢迎纠错</p>\n</blockquote>\n<ul>\n<li><p>创建<code>lerna</code>项目</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install lerna -g</span><br><span class=\"line\">cd admin-ui</span><br><span class=\"line\">lerna init # 使用默认的固定模式</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Add packages</span><br><span class=\"line\">cd packages</span><br><span class=\"line\">mkdir hello button admin-ui input</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>分别进入目录初始化成包</span><br><span class=\"line\">cd hello</span><br><span class=\"line\">npm init -y</span><br><span class=\"line\">cd ../button</span><br><span class=\"line\">npm init -y</span><br><span class=\"line\">cd ../admin-ui</span><br><span class=\"line\">npm init -y</span><br><span class=\"line\">cd ../input</span><br><span class=\"line\">npm init -y</span><br></pre></td></tr></table></figure></div>\n</li>\n<li><p>修改项目配置</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> package.json 文件加入</span><br><span class=\"line\">\"private\": true,</span><br><span class=\"line\">\"workspaces\": [</span><br><span class=\"line\">  \"packages/*\"</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> lerna.json 文件加入</span><br><span class=\"line\">\"useWorkspaces\": true,</span><br><span class=\"line\">\"npmClient\": \"yarn\" # 默认使用 yarn 作为包管理工具</span><br></pre></td></tr></table></figure></div>\n</li>\n</ul>\n<p>这样一个lerna脚手架就创建完成了，更多的命令脚本可以自己去看文档（主要是我现在也不会）。</p>\n<h2 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h2><p>上面已经定义好了默认使用 yarn 作为包管理工具，所以首先要保证全局有 yarn，然后执行<code>yarn add package -W</code>就可以了，这里有几点需要注意：</p>\n<ul>\n<li><code>yarn</code>没有必要作为项目依赖写入，因为我更希望你把它装在全局</li>\n<li>因为上面定义过<code>workspace</code>的原因，直接使用<code>yarn add package</code>会报错，需要在后面加上<code>-W</code></li>\n<li>项目本身定义为 UI 框架，因此<code>vue</code>相关的依赖也不需要加入到<code>dependencies</code>中，事实上绝大部分依赖都应该是开发依赖。</li>\n</ul>\n<p>本着上面的原则，一个基本的 vue 项目应该包含以下依赖：<br><code>vue、webpack、webpack-cli、webpack-dev-server、@babel/core、babel-loader、css-loader、html-webpack-plugin、vue-loader、vue-template-compile</code></p>\n<blockquote>\n<p>因为 webpack5 更新之后没有仔细研究过，加上 element-ui 也使用 webpack4，因此本项目使用的是 webpack4、webpack-cli3</p>\n</blockquote>\n<h2 id=\"创建项目模板\"><a href=\"#创建项目模板\" class=\"headerlink\" title=\"创建项目模板\"></a>创建项目模板</h2><p>安装好依赖，需要添加 vue 模板，参照 element-plus,在更目录新建<code>website</code>文件夹，加入<code>index.html、index.js、index.vue</code></p>\n<ul>\n<li><p>index.html</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">HTML</span></header><figure class=\"iseeu highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"IE=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>dt-ui<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div>\n</li>\n<li><p>index.js</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">JAVASCRIPT</span></header><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;createApp&#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'./index.vue'</span></span><br><span class=\"line\"></span><br><span class=\"line\">createApp(App).mount(<span class=\"string\">'#app'</span>)</span><br></pre></td></tr></table></figure></div>\n</li>\n<li><p>index.vue</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">JAVASCRIPT</span></header><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    hello,admin ui</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineComponent &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> defineComponent(&#123;</span><br><span class=\"line\">  name: <span class=\"string\">'app'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure></div>\n</li>\n</ul>\n<h2 id=\"启动本地服务\"><a href=\"#启动本地服务\" class=\"headerlink\" title=\"启动本地服务\"></a>启动本地服务</h2><p>根目录新建<code>build</code>文件夹，新增<code>webpack.config.base.js</code></p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">JAVASCRIPT</span></header><figure class=\"iseeu highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; VueLoaderPlugin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-loader'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: path.resolve(__dirname, <span class=\"string\">'../website/index.js'</span>),</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'../dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'index.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'babel-loader'</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.vue$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'vue-loader'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      template: <span class=\"string\">'./website/index.html'</span>,</span><br><span class=\"line\">      filename: <span class=\"string\">'./index.html'</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> VueLoaderPlugin()</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<p><code>package.json</code>添加命令 <code>&quot;dev&quot;: &quot;webpack-dev-server --config build/webpack.config.base.js&quot;</code>,运行<code>yarn dev</code>就可以在 8080 端口运行服务了</p>\n<blockquote>\n<p>如果这时没有运行成功，多半是报错，缺少其他的开发依赖。上面列举的是我知道的必须的 vue 项目依赖，并不完整。可以根据报错，缺什么，安装什么，最后一定没有问题。</p>\n</blockquote>\n<p>最后，补上当前的项目目录</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">├── build</span><br><span class=\"line\">│   └── webpack.config.base.js</span><br><span class=\"line\">├── lerna.json</span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── packages</span><br><span class=\"line\">│   ├── admin-ui</span><br><span class=\"line\">│   │   └── package.json</span><br><span class=\"line\">│   ├── button</span><br><span class=\"line\">│   │   └── package.json</span><br><span class=\"line\">│   ├── hello</span><br><span class=\"line\">│   │   └── package.json</span><br><span class=\"line\">│   └── input</span><br><span class=\"line\">│       └── package.json</span><br><span class=\"line\">├── website</span><br><span class=\"line\">│   ├── index.html</span><br><span class=\"line\">│   ├── index.js</span><br><span class=\"line\">│   └── index.vue</span><br><span class=\"line\">├── yarn-error.log</span><br><span class=\"line\">└── yarn.lock</span><br></pre></td></tr></table></figure></div>\n","more":"<p>Vue3 发布以来,一直在学习, 最近萌生出想要尝试自己搭建组件库的想法,正赶上开发任务不重,就在此尝试一下,一来提升一下能力,二来看能不能搭建成功。</p>\n<p><a href=\"https://github.com/lost-dream/zcm-admin-ui\" target=\"_blank\" rel=\"noopener\">附上仓库地址</a></p>\n<blockquote>\n<p>我的开发是从零搭建，但主要思路和结构参考了<a href=\"https://github.com/element-plus/element-plus\" target=\"_blank\" rel=\"noopener\">element-plus</a>,感谢饿了么团队提供的思路</p>\n</blockquote>\n<h2 id=\"初始化项目\"><a href=\"#初始化项目\" class=\"headerlink\" title=\"初始化项目\"></a>初始化项目</h2><p>因为是从零开始搭建，就不用 vue-cli 了，创建空文件夹开始</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir admin-ui</span><br><span class=\"line\">cd admin-ui &amp;&amp; npm init -y</span><br></pre></td></tr></table></figure>\n<p>参照<code>element-plus</code>，项目使用<a href=\"https://github.com/lerna/lerna\" target=\"_blank\" rel=\"noopener\">lerna</a>初始化，它优化了使用 git 和 npm 管理多包存储库的工作流，有兴趣可以研究一下</p>\n<blockquote>\n<p>我也是刚刚接触这个框架，有写错的地方欢迎纠错</p>\n</blockquote>\n<ul>\n<li><p>创建<code>lerna</code>项目</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install lerna -g</span><br><span class=\"line\">cd admin-ui</span><br><span class=\"line\">lerna init # 使用默认的固定模式</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Add packages</span><br><span class=\"line\">cd packages</span><br><span class=\"line\">mkdir hello button admin-ui input</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>分别进入目录初始化成包</span><br><span class=\"line\">cd hello</span><br><span class=\"line\">npm init -y</span><br><span class=\"line\">cd ../button</span><br><span class=\"line\">npm init -y</span><br><span class=\"line\">cd ../admin-ui</span><br><span class=\"line\">npm init -y</span><br><span class=\"line\">cd ../input</span><br><span class=\"line\">npm init -y</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>修改项目配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> package.json 文件加入</span><br><span class=\"line\">\"private\": true,</span><br><span class=\"line\">\"workspaces\": [</span><br><span class=\"line\">  \"packages/*\"</span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> lerna.json 文件加入</span><br><span class=\"line\">\"useWorkspaces\": true,</span><br><span class=\"line\">\"npmClient\": \"yarn\" # 默认使用 yarn 作为包管理工具</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p>这样一个lerna脚手架就创建完成了，更多的命令脚本可以自己去看文档（主要是我现在也不会）。</p>\n<h2 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h2><p>上面已经定义好了默认使用 yarn 作为包管理工具，所以首先要保证全局有 yarn，然后执行<code>yarn add package -W</code>就可以了，这里有几点需要注意：</p>\n<ul>\n<li><code>yarn</code>没有必要作为项目依赖写入，因为我更希望你把它装在全局</li>\n<li>因为上面定义过<code>workspace</code>的原因，直接使用<code>yarn add package</code>会报错，需要在后面加上<code>-W</code></li>\n<li>项目本身定义为 UI 框架，因此<code>vue</code>相关的依赖也不需要加入到<code>dependencies</code>中，事实上绝大部分依赖都应该是开发依赖。</li>\n</ul>\n<p>本着上面的原则，一个基本的 vue 项目应该包含以下依赖：<br><code>vue、webpack、webpack-cli、webpack-dev-server、@babel/core、babel-loader、css-loader、html-webpack-plugin、vue-loader、vue-template-compile</code></p>\n<blockquote>\n<p>因为 webpack5 更新之后没有仔细研究过，加上 element-ui 也使用 webpack4，因此本项目使用的是 webpack4、webpack-cli3</p>\n</blockquote>\n<h2 id=\"创建项目模板\"><a href=\"#创建项目模板\" class=\"headerlink\" title=\"创建项目模板\"></a>创建项目模板</h2><p>安装好依赖，需要添加 vue 模板，参照 element-plus,在更目录新建<code>website</code>文件夹，加入<code>index.html、index.js、index.vue</code></p>\n<ul>\n<li><p>index.html</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">http-equiv</span>=<span class=\"string\">\"X-UA-Compatible\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"IE=edge\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">\"viewport\"</span> <span class=\"attr\">content</span>=<span class=\"string\">\"width=device-width, initial-scale=1.0\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>dt-ui<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>index.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// index.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123;createApp&#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'./index.vue'</span></span><br><span class=\"line\"></span><br><span class=\"line\">createApp(App).mount(<span class=\"string\">'#app'</span>)</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>index.vue</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div <span class=\"class\"><span class=\"keyword\">class</span></span>=<span class=\"string\">\"app\"</span>&gt;</span><br><span class=\"line\">    hello,admin ui</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">&lt;/</span>template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; defineComponent &#125; <span class=\"keyword\">from</span> <span class=\"string\">'vue'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> defineComponent(&#123;</span><br><span class=\"line\">  name: <span class=\"string\">'app'</span></span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">&lt;<span class=\"regexp\">/script&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<h2 id=\"启动本地服务\"><a href=\"#启动本地服务\" class=\"headerlink\" title=\"启动本地服务\"></a>启动本地服务</h2><p>根目录新建<code>build</code>文件夹，新增<code>webpack.config.base.js</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> HtmlWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'html-webpack-plugin'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; VueLoaderPlugin &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'vue-loader'</span>)</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  entry: path.resolve(__dirname, <span class=\"string\">'../website/index.js'</span>),</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'../dist'</span>),</span><br><span class=\"line\">    filename: <span class=\"string\">'index.js'</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'babel-loader'</span>,</span><br><span class=\"line\">        exclude: <span class=\"regexp\">/node_modules/</span></span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.vue$/</span>,</span><br><span class=\"line\">        loader: <span class=\"string\">'vue-loader'</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    <span class=\"keyword\">new</span> HtmlWebpackPlugin(&#123;</span><br><span class=\"line\">      template: <span class=\"string\">'./website/index.html'</span>,</span><br><span class=\"line\">      filename: <span class=\"string\">'./index.html'</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> VueLoaderPlugin()</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>package.json</code>添加命令 <code>&quot;dev&quot;: &quot;webpack-dev-server --config build/webpack.config.base.js&quot;</code>,运行<code>yarn dev</code>就可以在 8080 端口运行服务了</p>\n<blockquote>\n<p>如果这时没有运行成功，多半是报错，缺少其他的开发依赖。上面列举的是我知道的必须的 vue 项目依赖，并不完整。可以根据报错，缺什么，安装什么，最后一定没有问题。</p>\n</blockquote>\n<p>最后，补上当前的项目目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">├── build</span><br><span class=\"line\">│   └── webpack.config.base.js</span><br><span class=\"line\">├── lerna.json</span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── packages</span><br><span class=\"line\">│   ├── admin-ui</span><br><span class=\"line\">│   │   └── package.json</span><br><span class=\"line\">│   ├── button</span><br><span class=\"line\">│   │   └── package.json</span><br><span class=\"line\">│   ├── hello</span><br><span class=\"line\">│   │   └── package.json</span><br><span class=\"line\">│   └── input</span><br><span class=\"line\">│       └── package.json</span><br><span class=\"line\">├── website</span><br><span class=\"line\">│   ├── index.html</span><br><span class=\"line\">│   ├── index.js</span><br><span class=\"line\">│   └── index.vue</span><br><span class=\"line\">├── yarn-error.log</span><br><span class=\"line\">└── yarn.lock</span><br></pre></td></tr></table></figure>\n","categories":[{"name":"adminUI","path":"api/categories/adminUI.json"}],"tags":[{"name":"vue","path":"api/tags/vue.json"},{"name":"adminUI","path":"api/tags/adminUI.json"}]}