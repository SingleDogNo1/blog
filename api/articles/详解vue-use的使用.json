{"title":"详解vue.use的使用","slug":"详解vue-use的使用","date":"2019-02-15T08:35:37.000Z","updated":"2023-06-21T08:55:09.216Z","comments":true,"path":"api/articles/详解vue-use的使用.json","excerpt":null,"covers":null,"content":"<p>vue,use用来安装 Vue.js 插件。如果插件是一个对象，必须提供 install 方法。如果插件是一个函数，它会被作为 install 方法。install 方法调用时，会将 Vue 作为参数传入。因此vue.use()常需要扩展的用法有两个：添加全局的方法（插件是函数）、添加全局的组件（插件是对象）。</p>\n<h2 id=\"添加全局方法\"><a href=\"#添加全局方法\" class=\"headerlink\" title=\"添加全局方法\"></a>添加全局方法</h2><blockquote>\n<p>这里举例将axios添加到全局。</p>\n</blockquote>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"><span>@/assets/js/request.js</span></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">\"axios\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> qs <span class=\"keyword\">from</span> <span class=\"string\">\"qs\"</span>;</span><br><span class=\"line\"><span class=\"comment\">// 创建axios对象</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> service = axios.create(&#123;</span><br><span class=\"line\">  baseURL: process.env.VUE_APP_BASE_API,</span><br><span class=\"line\">  timeout: <span class=\"number\">10000</span>,</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    autauthorization: <span class=\"string\">'123456'</span>,</span><br><span class=\"line\">    name: <span class=\"string\">'singleDogNo.1'</span></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 需要的话加入拦截器</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建get请求</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get</span>(<span class=\"params\">url, params, headers</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> options = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (params) &#123;</span><br><span class=\"line\">    options.params = params;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (headers) &#123;</span><br><span class=\"line\">    options.headers = headers;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> service.get(url, options);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建post请求</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">post</span>(<span class=\"params\">url, data, headers</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> options = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (headers) &#123;</span><br><span class=\"line\">    options.headers = headers;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> service.post(url, qs.stringify(data), options);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 将请求挂载到全局</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  install(Vue) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.defineProperty(Vue.prototype, <span class=\"string\">\"$get\"</span>, &#123; <span class=\"attr\">value</span>: <span class=\"keyword\">get</span> &#125;);</span><br><span class=\"line\">    Object.defineProperty(Vue.prototype, \"$post\", &#123; value: post &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ------------------------- 这里是切换文件的分割线 -------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// @/main.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> request <span class=\"keyword\">from</span> <span class=\"string\">\"@/assets/js/request\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(request);</span><br></pre></td></tr></table></figure></div>\n<p>接下来在这个项目中的任何地方你都可以直接使用this.$get和this.$post来发送请求。</p>\n<h2 id=\"添加全局的组件\"><a href=\"#添加全局的组件\" class=\"headerlink\" title=\"添加全局的组件\"></a>添加全局的组件</h2><blockquote>\n<p>这里举例添加一个loding组件</p>\n</blockquote>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">PLAIN</span></header><figure class=\"iseeu highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- @/components/Loading.vue --&gt;</span><br><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div class=&quot;loading&quot; v-if=&quot;show&quot; @click=&quot;close&quot;&gt;hello, &#123;&#123; msg &#125;&#125;&lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  name: &quot;index&quot;,</span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\">    msg: &#123;</span><br><span class=\"line\">      default: &apos;loading&apos;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    show: &#123;</span><br><span class=\"line\">      default: true</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    close() &#123;</span><br><span class=\"line\">      this.$emit(&apos;close&apos;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- -------------- 这里是切换文件的分割线 -------------- --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- @/plugins/loading.js --&gt;</span><br><span class=\"line\">import Loading from &quot;@/components/Loading&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">const loading = &#123;</span><br><span class=\"line\">  install(Vue, options) &#123;</span><br><span class=\"line\">    Vue.component(&quot;Loading&quot;, Loading, options);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">export default loading;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- -------------- 这里是切换文件的分割线 -------------- --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- @/main.js --&gt;</span><br><span class=\"line\">Vue.use(Loading, &#123;</span><br><span class=\"line\">  // ...</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></div>\n<p>然后就可以在项目的任何地方使用<code>&lt;Loading&gt;&lt;/Loading&gt;</code>来引用loading组件，并且同样可以使用@close :show等组件方法，以及自定义的options。</p>\n","more":"<p>vue,use用来安装 Vue.js 插件。如果插件是一个对象，必须提供 install 方法。如果插件是一个函数，它会被作为 install 方法。install 方法调用时，会将 Vue 作为参数传入。因此vue.use()常需要扩展的用法有两个：添加全局的方法（插件是函数）、添加全局的组件（插件是对象）。</p>\n<h2 id=\"添加全局方法\"><a href=\"#添加全局方法\" class=\"headerlink\" title=\"添加全局方法\"></a>添加全局方法</h2><blockquote>\n<p>这里举例将axios添加到全局。</p>\n</blockquote>\n<figure class=\"highlight js\"><figcaption><span>@/assets/js/request.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">\"axios\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> qs <span class=\"keyword\">from</span> <span class=\"string\">\"qs\"</span>;</span><br><span class=\"line\"><span class=\"comment\">// 创建axios对象</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> service = axios.create(&#123;</span><br><span class=\"line\">  baseURL: process.env.VUE_APP_BASE_API,</span><br><span class=\"line\">  timeout: <span class=\"number\">10000</span>,</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    autauthorization: <span class=\"string\">'123456'</span>,</span><br><span class=\"line\">    name: <span class=\"string\">'singleDogNo.1'</span></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 需要的话加入拦截器</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建get请求</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">get</span>(<span class=\"params\">url, params, headers</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> options = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (params) &#123;</span><br><span class=\"line\">    options.params = params;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (headers) &#123;</span><br><span class=\"line\">    options.headers = headers;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> service.get(url, options);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 创建post请求</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">post</span>(<span class=\"params\">url, data, headers</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> options = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (headers) &#123;</span><br><span class=\"line\">    options.headers = headers;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> service.post(url, qs.stringify(data), options);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 将请求挂载到全局</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  install(Vue) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.defineProperty(Vue.prototype, <span class=\"string\">\"$get\"</span>, &#123; <span class=\"attr\">value</span>: <span class=\"keyword\">get</span> &#125;);</span><br><span class=\"line\">    Object.defineProperty(Vue.prototype, \"$post\", &#123; value: post &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ------------------------- 这里是切换文件的分割线 -------------------------</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// @/main.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> request <span class=\"keyword\">from</span> <span class=\"string\">\"@/assets/js/request\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">Vue.use(request);</span><br></pre></td></tr></table></figure>\n<p>接下来在这个项目中的任何地方你都可以直接使用this.$get和this.$post来发送请求。</p>\n<h2 id=\"添加全局的组件\"><a href=\"#添加全局的组件\" class=\"headerlink\" title=\"添加全局的组件\"></a>添加全局的组件</h2><blockquote>\n<p>这里举例添加一个loding组件</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- @/components/Loading.vue --&gt;</span><br><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div class=&quot;loading&quot; v-if=&quot;show&quot; @click=&quot;close&quot;&gt;hello, &#123;&#123; msg &#125;&#125;&lt;/div&gt;</span><br><span class=\"line\">&lt;/template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">export default &#123;</span><br><span class=\"line\">  name: &quot;index&quot;,</span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\">    msg: &#123;</span><br><span class=\"line\">      default: &apos;loading&apos;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    show: &#123;</span><br><span class=\"line\">      default: true</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    close() &#123;</span><br><span class=\"line\">      this.$emit(&apos;close&apos;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">&lt;/script&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- -------------- 这里是切换文件的分割线 -------------- --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- @/plugins/loading.js --&gt;</span><br><span class=\"line\">import Loading from &quot;@/components/Loading&quot;;</span><br><span class=\"line\"></span><br><span class=\"line\">const loading = &#123;</span><br><span class=\"line\">  install(Vue, options) &#123;</span><br><span class=\"line\">    Vue.component(&quot;Loading&quot;, Loading, options);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">export default loading;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- -------------- 这里是切换文件的分割线 -------------- --&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;!-- @/main.js --&gt;</span><br><span class=\"line\">Vue.use(Loading, &#123;</span><br><span class=\"line\">  // ...</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>然后就可以在项目的任何地方使用<code>&lt;Loading&gt;&lt;/Loading&gt;</code>来引用loading组件，并且同样可以使用@close :show等组件方法，以及自定义的options。</p>\n","categories":[{"name":"vue","path":"api/categories/vue.json"}],"tags":[{"name":"vue","path":"api/tags/vue.json"},{"name":"axios","path":"api/tags/axios.json"}]}