{"title":"vue3 脚手架（一）","slug":"vite-vue-1","date":"2021-06-29T05:37:16.000Z","updated":"2023-06-21T08:55:09.214Z","comments":true,"path":"api/articles/vite-vue-1.json","excerpt":null,"covers":["/img/commitizen.jpg"],"content":"<blockquote>\n<p>这系列文章借由 vue3 脚手架搭建，过程中顺便写写自己的开发规范和编辑器习惯。<br>本文仓库地址为: <a href=\"https://github.com/lost-dream/vue3-template\" target=\"_blank\" rel=\"noopener\">vue3-template</a><br><strong>所有的规范都以我的团队的开发习惯为示例，文章中只针对开发规范本身，所有的规范参照自己的团队开发</strong></p>\n</blockquote>\n<h2 id=\"hello-world\"><a href=\"#hello-world\" class=\"headerlink\" title=\"hello, world\"></a>hello, world</h2><p>首先通过<code>vite-cli</code>搭建基础的脚手架，使用<code>vue-ts</code>模板</p>\n<blockquote>\n<p>vite 需要 node.js 版本 &gt;= 12.0.0</p>\n</blockquote>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"><span>.eslintrc.js</span></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn create @vitejs/app vue3-template --template vue-ts</span><br></pre></td></tr></table></figure></div>\n<h2 id=\"修改项目结构\"><a href=\"#修改项目结构\" class=\"headerlink\" title=\"修改项目结构\"></a>修改项目结构</h2><p>安装完成后，需要修改为我们更常用的项目配置。<strong>以下是我的开发习惯</strong></p>\n<ul>\n<li>根目录新建<code>types</code>文件夹，用来存放各种全局的<code>ts声明文件</code>。上一步新建的项目中，<code>src</code>文件夹下的<code>shims-vue.d.ts</code>和<code>vite-env.d.ts</code>也要转移到该文件夹下统一管理。</li>\n<li>根目录新建<code>mock</code>文件夹，用于开发环境模拟运行数据</li>\n<li>根目录新建<code>test</code>文件夹，用于开发环境单元测试</li>\n<li><code>src</code>目录下新建<ul>\n<li><code>api</code>文件夹统一管理后台请求，具体到业务开发中，需要细分为和后端相同的各个功能子模块，以便日后统一开发维护</li>\n<li><code>styles</code>文件夹统一管理各种全局样式文件、全局css变量、全局 css 方法等（个人使用 sass）</li>\n<li><code>hooks</code>文件夹统一管理<code>composition API</code>的函数片段</li>\n<li><code>router</code>文件夹管理路由</li>\n<li><code>store</code>文件夹管理<code>vuex</code></li>\n<li><code>utils</code>文件夹管理各种功能函数</li>\n<li><code>views</code>文件夹管理各个 vue 模块</li>\n</ul>\n</li>\n</ul>\n<p>结合到项目开发中，可能还需要更多复杂的模块诸如</p>\n<ul>\n<li><code>locales</code> – 语言包</li>\n<li><code>layout</code> – 布局结构</li>\n<li><code>enums</code> – 枚举类型统一管理</li>\n<li><code>directives</code>、 <code>filters</code> – vue 语法扩展</li>\n<li>…</li>\n</ul>\n<p>根据需要再做补充</p>\n<h2 id=\"添加开发规范\"><a href=\"#添加开发规范\" class=\"headerlink\" title=\"添加开发规范\"></a>添加开发规范</h2><p>没有规矩不成方圆，开发规范是团队维护项目减少开发成本最有效的方式之一</p>\n<h3 id=\"eslint-prettier\"><a href=\"#eslint-prettier\" class=\"headerlink\" title=\"eslint / prettier\"></a>eslint / prettier</h3><h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"><span>.eslintrc.js</span></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add --dev eslint prettier eslint-config-prettier eslint-plugin-prettier eslint-define-config eslint-plugin-vue @typescript-eslint/eslint-plugin @typescript-eslint/parser</span><br></pre></td></tr></table></figure></div>\n<p>依赖有点多，其中<code>eslint-config-prettier</code> / <code>eslint-plugin-prettier</code> 是<code>eslint</code>的<code>prettier</code>插件，<code>eslint-plugin-vue</code>是 <code>eslint</code>的<code>vue</code>语法插件，剩下的是<code>typescript</code>语法支持。</p>\n<h4 id=\"创建配置文件\"><a href=\"#创建配置文件\" class=\"headerlink\" title=\"创建配置文件\"></a>创建配置文件</h4><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"><span>.eslintrc.js</span></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; defineConfig &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'eslint-define-config'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = defineConfig(&#123;</span><br><span class=\"line\">  root: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  env: &#123;</span><br><span class=\"line\">    browser: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    node: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    es6: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  parser: <span class=\"string\">'vue-eslint-parser'</span>,</span><br><span class=\"line\">  parserOptions: &#123;</span><br><span class=\"line\">    parser: <span class=\"string\">'@typescript-eslint/parser'</span>,</span><br><span class=\"line\">    ecmaVersion: <span class=\"number\">2020</span>,</span><br><span class=\"line\">    sourceType: <span class=\"string\">'module'</span>,</span><br><span class=\"line\">    jsxPragma: <span class=\"string\">'React'</span>,</span><br><span class=\"line\">    ecmaFeatures: &#123;</span><br><span class=\"line\">      jsx: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  extends: [</span><br><span class=\"line\">    <span class=\"string\">'plugin:vue/vue3-recommended'</span>,</span><br><span class=\"line\">    <span class=\"string\">'plugin:@typescript-eslint/recommended'</span>,</span><br><span class=\"line\">    <span class=\"string\">'prettier'</span>,</span><br><span class=\"line\">    <span class=\"string\">'plugin:prettier/recommended'</span>,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  rules: &#123;</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/ban-ts-ignore'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/explicit-function-return-type'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-explicit-any'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-var-requires'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-empty-function'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/custom-event-name-casing'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'no-use-before-define'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-use-before-define'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/ban-ts-comment'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/ban-types'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-non-null-assertion'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/explicit-module-boundary-types'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-unused-vars'</span>: [</span><br><span class=\"line\">      <span class=\"string\">'error'</span>,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        argsIgnorePattern: <span class=\"string\">'^_'</span>,</span><br><span class=\"line\">        varsIgnorePattern: <span class=\"string\">'^_'</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">'no-unused-vars'</span>: [</span><br><span class=\"line\">      <span class=\"string\">'error'</span>,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        argsIgnorePattern: <span class=\"string\">'^_'</span>,</span><br><span class=\"line\">        varsIgnorePattern: <span class=\"string\">'^_'</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">'space-before-function-paren'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">'vue/attributes-order'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/one-component-per-file'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/html-closing-bracket-newline'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/max-attributes-per-line'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/multiline-html-element-content-newline'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/singleline-html-element-content-newline'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/attribute-hyphenation'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/require-default-prop'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/html-self-closing'</span>: [</span><br><span class=\"line\">      <span class=\"string\">'error'</span>,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        html: &#123;</span><br><span class=\"line\">          <span class=\"keyword\">void</span>: <span class=\"string\">'always'</span>,</span><br><span class=\"line\">          normal: <span class=\"string\">'never'</span>,</span><br><span class=\"line\">          component: <span class=\"string\">'always'</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        svg: <span class=\"string\">'always'</span>,</span><br><span class=\"line\">        math: <span class=\"string\">'always'</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></div>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"><span>prettier.config.js</span></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  printWidth: <span class=\"number\">100</span>,</span><br><span class=\"line\">  tabWidth: <span class=\"number\">2</span>,</span><br><span class=\"line\">  useTabs: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  semi: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  singleQuote: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  quoteProps: <span class=\"string\">'as-needed'</span>,</span><br><span class=\"line\">  bracketSpacing: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  trailingComma: <span class=\"string\">'es5'</span>,</span><br><span class=\"line\">  jsxBracketSameLine: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  jsxSingleQuote: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  arrowParens: <span class=\"string\">'always'</span>,</span><br><span class=\"line\">  insertPragma: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  requirePragma: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  proseWrap: <span class=\"string\">'never'</span>,</span><br><span class=\"line\">  htmlWhitespaceSensitivity: <span class=\"string\">'strict'</span>,</span><br><span class=\"line\">  endOfLine: <span class=\"string\">'lf'</span>,</span><br><span class=\"line\">  rangeStart: <span class=\"number\">0</span>,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></div>\n<h4 id=\"修改-package-json\"><a href=\"#修改-package-json\" class=\"headerlink\" title=\"修改 package.json\"></a>修改 package.json</h4><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"><span>ROOT/stylelint.config.js</span></span><span class=\"mac-panel__language\">DIFF</span></header><figure class=\"iseeu highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\"><span class=\"addition\">+   \"lint:eslint\": \"eslint \\\"&#123;src,mock&#125;/**/*.&#123;vue,ts,tsx,js,jsx,css,scss,postcss&#125;\\\" --fix\"</span></span><br><span class=\"line\"><span class=\"addition\">+   \"lint\": \"yarn lint:eslint\"</span></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></div>\n<p>表示格式化<code>src</code>文件夹下所有的<code>ts</code>、<code>js</code>、<code>vue</code>、<code>css</code>、<code>scss</code>、<code>json</code>文件，如果有额外补充，参照语法自己修改即可。</p>\n<h3 id=\"stylelint\"><a href=\"#stylelint\" class=\"headerlink\" title=\"stylelint\"></a>stylelint</h3><h4 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h4><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"><span>ROOT/stylelint.config.js</span></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add --dev stylelint stylelint-config-prettier stylelint-config-standard stylelint-order</span><br></pre></td></tr></table></figure></div>\n<h4 id=\"创建stylelint-config-js\"><a href=\"#创建stylelint-config-js\" class=\"headerlink\" title=\"创建stylelint.config.js\"></a>创建stylelint.config.js</h4><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"><span>ROOT/stylelint.config.js</span></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  root: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  plugins: [<span class=\"string\">'stylelint-order'</span>],</span><br><span class=\"line\">  extends: [<span class=\"string\">'stylelint-config-standard'</span>, <span class=\"string\">'stylelint-config-prettier'</span>],</span><br><span class=\"line\">  rules: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// custom rules...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ignoreFiles: [<span class=\"string\">'**/*.js'</span>, <span class=\"string\">'**/*.jsx'</span>, <span class=\"string\">'**/*.tsx'</span>, <span class=\"string\">'**/*.ts'</span>],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<h4 id=\"修改-package-json-1\"><a href=\"#修改-package-json-1\" class=\"headerlink\" title=\"修改 package.json\"></a>修改 package.json</h4><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">DIFF</span></header><figure class=\"iseeu highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\"><span class=\"addition\">+   \"lint:stylelint\": \"stylelint \\\"**/*.&#123;vue,postcss,css,scss&#125;\\\" --fix\",</span></span><br><span class=\"line\"><span class=\"deletion\">-   \"lint\": \"yarn lint:eslint\"</span></span><br><span class=\"line\"><span class=\"addition\">+   \"lint\": \"yarn lint:eslint &amp;&amp; yarn lint:stylelint\"</span></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></div>\n<h3 id=\"commitlint-以及-husky-lint-staged-配置\"><a href=\"#commitlint-以及-husky-lint-staged-配置\" class=\"headerlink\" title=\"commitlint 以及 husky / lint-staged 配置\"></a>commitlint 以及 husky / lint-staged 配置</h3><h4 id=\"安装依赖-1\"><a href=\"#安装依赖-1\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h4><div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add --dev commitizen @commitlint/cli @commitlint/config-conventional commitlint-config-cz cz-conventional-changelog cz-customizable lint-staged</span><br></pre></td></tr></table></figure></div>\n<h4 id=\"配置-husky\"><a href=\"#配置-husky\" class=\"headerlink\" title=\"配置 husky\"></a>配置 husky</h4><p>参照<a href=\"https://typicode.github.io/husky/#/?id=install\" target=\"_blank\" rel=\"noopener\">官方文档</a>，安装<code>husky</code>并启用<code>git hooks</code></p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx husky install</span><br></pre></td></tr></table></figure></div>\n<p>修改<code>package.json</code></p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">DIFF</span></header><figure class=\"iseeu highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\"><span class=\"addition\">+    \"prepare\": \"husky install\"</span></span><br><span class=\"line\"><span class=\"addition\">+    \"commit\": \"git-cz\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"><span class=\"addition\">+ \"config\": &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+   \"commitizen\": &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+     \"path\": \"node_modules/cz-customizable\"</span></span><br><span class=\"line\"><span class=\"addition\">+  &#125;</span></span><br><span class=\"line\"><span class=\"addition\">+ &#125;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<p>添加<code>commit</code>规范相关的<code>git hooks</code></p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">SHELL</span></header><figure class=\"iseeu highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx husky add .husky/commit-msg 'yarn commitlint --edit \"$1\"'</span><br></pre></td></tr></table></figure></div>\n<p>创建<code>.cz-config.js</code>，自定义想要的提交格式。</p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  types: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'feat'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'✨  feat:         添加新功能'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'fix'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'🐞  fix:          修复bug'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'style'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'💅  style:        代码格式变动, 不影响代码功能的更改(修改空格/格式化代码等操作)'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'docs'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'📚  docs:         修改文档'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'test'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'🏁  test:         新增或修改测试用例'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'refactor'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'🛠   refactor:     既不是新增功能，也不是修改bug的代码变动'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'chore'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'🗯   chore:        更改环境配置相关文件'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'revert'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'⏪  revert:       版本回退'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'ui'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'✏️   ui:           只更新css样式，不涉及任何业务功能的修改'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  scopes: [],</span><br><span class=\"line\">  allowCustomScopes: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  allowBreakingChanges: [<span class=\"string\">'feat'</span>, <span class=\"string\">'fix'</span>],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<p>如此，执行<code>yarn commit</code>命令，会出现以下效果<br><img src=\"/img/commitizen.jpg\" alt=\"commitizen\"><br>方向键选择要提交的类型，确定后输入提交的信息即可。当然如果你更喜欢命令行直接提交也是可以的，新建文件<code>commitlint.config.js</code></p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ignores: [<span class=\"function\">(<span class=\"params\">commit</span>) =&gt;</span> commit.includes(<span class=\"string\">'init'</span>)],</span><br><span class=\"line\">  extends: [<span class=\"string\">'@commitlint/config-conventional'</span>, <span class=\"string\">'cz'</span>],</span><br><span class=\"line\">  parserPreset: &#123;</span><br><span class=\"line\">    parserOpts: &#123;</span><br><span class=\"line\">      headerPattern: <span class=\"regexp\">/^(\\w*|[\\u4e00-\\u9fa5]*)(?:[\\(\\（](.*)[\\)\\）])?[\\:\\：] (.*)/</span>,</span><br><span class=\"line\">      headerCorrespondence: [<span class=\"string\">'type'</span>, <span class=\"string\">'scope'</span>, <span class=\"string\">'subject'</span>],</span><br><span class=\"line\">      referenceActions: [</span><br><span class=\"line\">        <span class=\"string\">'close'</span>,</span><br><span class=\"line\">        <span class=\"string\">'closes'</span>,</span><br><span class=\"line\">        <span class=\"string\">'closed'</span>,</span><br><span class=\"line\">        <span class=\"string\">'fix'</span>,</span><br><span class=\"line\">        <span class=\"string\">'fixes'</span>,</span><br><span class=\"line\">        <span class=\"string\">'fixed'</span>,</span><br><span class=\"line\">        <span class=\"string\">'resolve'</span>,</span><br><span class=\"line\">        <span class=\"string\">'resolves'</span>,</span><br><span class=\"line\">        <span class=\"string\">'resolved'</span>,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      issuePrefixes: [<span class=\"string\">'#'</span>],</span><br><span class=\"line\">      noteKeywords: [<span class=\"string\">'BREAKING CHANGE'</span>],</span><br><span class=\"line\">      fieldPattern: <span class=\"regexp\">/^-(.*?)-$/</span>,</span><br><span class=\"line\">      revertPattern: <span class=\"regexp\">/^Revert\\s\"([\\s\\S]*)\"\\s*This reverts commit (\\w*)\\./</span>,</span><br><span class=\"line\">      revertCorrespondence: [<span class=\"string\">'header'</span>, <span class=\"string\">'hash'</span>],</span><br><span class=\"line\">      warn() &#123;&#125;,</span><br><span class=\"line\">      mergePattern: <span class=\"literal\">null</span>,</span><br><span class=\"line\">      mergeCorrespondence: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  rules: &#123;</span><br><span class=\"line\">    <span class=\"string\">'body-leading-blank'</span>: [<span class=\"number\">2</span>, <span class=\"string\">'always'</span>],</span><br><span class=\"line\">    <span class=\"string\">'footer-leading-blank'</span>: [<span class=\"number\">1</span>, <span class=\"string\">'always'</span>],</span><br><span class=\"line\">    <span class=\"string\">'header-max-length'</span>: [<span class=\"number\">2</span>, <span class=\"string\">'always'</span>, <span class=\"number\">108</span>],</span><br><span class=\"line\">    <span class=\"string\">'subject-empty'</span>: [<span class=\"number\">2</span>, <span class=\"string\">'never'</span>],</span><br><span class=\"line\">    <span class=\"string\">'type-empty'</span>: [<span class=\"number\">2</span>, <span class=\"string\">'never'</span>],</span><br><span class=\"line\">    <span class=\"string\">'type-enum'</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"string\">'always'</span>,</span><br><span class=\"line\">      [</span><br><span class=\"line\">        <span class=\"string\">'feat'</span>, <span class=\"comment\">// 增加新功能</span></span><br><span class=\"line\">        <span class=\"string\">'fix'</span>, <span class=\"comment\">// 修复 bug</span></span><br><span class=\"line\">        <span class=\"string\">'style'</span>, <span class=\"comment\">// 修改不影响功能的代码格式（注意是代码格式，不是 css 样式）</span></span><br><span class=\"line\">        <span class=\"string\">'docs'</span>, <span class=\"comment\">// 新增文档</span></span><br><span class=\"line\">        <span class=\"string\">'test'</span>, <span class=\"comment\">// 新增测试用例</span></span><br><span class=\"line\">        <span class=\"string\">'refactor'</span>, <span class=\"comment\">// 重构（既不是新增功能，也不是修改bug的代码变动）</span></span><br><span class=\"line\">        <span class=\"string\">'chore'</span>, <span class=\"comment\">// 构建过程或辅助工具的变动</span></span><br><span class=\"line\">        <span class=\"string\">'revert'</span>, <span class=\"comment\">// 版本回退</span></span><br><span class=\"line\">        <span class=\"string\">'ui'</span>, <span class=\"comment\">// 只更新css样式，不涉及任何业务功能的修改</span></span><br><span class=\"line\">      ],</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<p>具体规则可以查阅相关文档。需要注意的是，<code>rules</code>中的<code>type-enum</code>选项，一旦定义了，提交的信息就必须以规定过的<code>type</code>来开头。否则都会出现 error，阻止本次提交。简单来说，<code>commitlint</code>目的就是让开发者每次提交都按照规定，上面规则规定了提交的形式为<code>type: xxxxx</code>(注意冒号之后有空格)，其中 <code>type</code> 为上述定义的 type，这也是绝大部分开发者习惯的提交方式。</p>\n<p>参考<a href=\"https://github.com/okonet/lint-staged#configuration\" target=\"_blank\" rel=\"noopener\">lint-staged官方文档</a>，根目录添加<code>lint-staged.config.js</code></p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">JS</span></header><figure class=\"iseeu highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"string\">'*.&#123;js,jsx,ts,tsx,vue&#125;'</span>: [<span class=\"string\">'npm run lint'</span>],</span><br><span class=\"line\">  <span class=\"string\">'package.json'</span>: [<span class=\"string\">'prettier --write'</span>],</span><br><span class=\"line\">  <span class=\"string\">'*.&#123;css,scss,less,styl,html&#125;'</span>: [<span class=\"string\">'stylelint --fix'</span>, <span class=\"string\">'prettier --write'</span>],</span><br><span class=\"line\">  <span class=\"string\">'*.md'</span>: [<span class=\"string\">'prettier --write'</span>],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></div>\n<p>修改<code>pre-commit</code></p>\n<div class=\"code-panel__wrapper\" autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\"><header class=\"mac-panel\"><span class=\"doc-path\"></span><span class=\"mac-panel__language\">DIFF</span></header><figure class=\"iseeu highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"deletion\">-  yarn lint</span></span><br><span class=\"line\"><span class=\"addition\">+  yarn lint-staged --allow-empty \"$1\"</span></span><br></pre></td></tr></table></figure></div>\n<h2 id=\"end\"><a href=\"#end\" class=\"headerlink\" title=\"end\"></a>end</h2><p>如此，一个基本的开发架构就搭建完成了，没有规矩，不成方圆。这一篇主要制定了一系列开发规范来约束开发习惯，在我看来，团队合作开发，个人能力是不及规范来得重要的。我们规范了项目结构，规范了代码结构，规定了提交结构。接下来，<strong>工欲善其事必先利其器，下一节专门说说 vscode 的相关配置</strong></p>\n","more":"<blockquote>\n<p>这系列文章借由 vue3 脚手架搭建，过程中顺便写写自己的开发规范和编辑器习惯。<br>本文仓库地址为: <a href=\"https://github.com/lost-dream/vue3-template\" target=\"_blank\" rel=\"noopener\">vue3-template</a><br><strong>所有的规范都以我的团队的开发习惯为示例，文章中只针对开发规范本身，所有的规范参照自己的团队开发</strong></p>\n</blockquote>\n<h2 id=\"hello-world\"><a href=\"#hello-world\" class=\"headerlink\" title=\"hello, world\"></a>hello, world</h2><p>首先通过<code>vite-cli</code>搭建基础的脚手架，使用<code>vue-ts</code>模板</p>\n<blockquote>\n<p>vite 需要 node.js 版本 &gt;= 12.0.0</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn create @vitejs/app vue3-template --template vue-ts</span><br></pre></td></tr></table></figure>\n<h2 id=\"修改项目结构\"><a href=\"#修改项目结构\" class=\"headerlink\" title=\"修改项目结构\"></a>修改项目结构</h2><p>安装完成后，需要修改为我们更常用的项目配置。<strong>以下是我的开发习惯</strong></p>\n<ul>\n<li>根目录新建<code>types</code>文件夹，用来存放各种全局的<code>ts声明文件</code>。上一步新建的项目中，<code>src</code>文件夹下的<code>shims-vue.d.ts</code>和<code>vite-env.d.ts</code>也要转移到该文件夹下统一管理。</li>\n<li>根目录新建<code>mock</code>文件夹，用于开发环境模拟运行数据</li>\n<li>根目录新建<code>test</code>文件夹，用于开发环境单元测试</li>\n<li><code>src</code>目录下新建<ul>\n<li><code>api</code>文件夹统一管理后台请求，具体到业务开发中，需要细分为和后端相同的各个功能子模块，以便日后统一开发维护</li>\n<li><code>styles</code>文件夹统一管理各种全局样式文件、全局css变量、全局 css 方法等（个人使用 sass）</li>\n<li><code>hooks</code>文件夹统一管理<code>composition API</code>的函数片段</li>\n<li><code>router</code>文件夹管理路由</li>\n<li><code>store</code>文件夹管理<code>vuex</code></li>\n<li><code>utils</code>文件夹管理各种功能函数</li>\n<li><code>views</code>文件夹管理各个 vue 模块</li>\n</ul>\n</li>\n</ul>\n<p>结合到项目开发中，可能还需要更多复杂的模块诸如</p>\n<ul>\n<li><code>locales</code> – 语言包</li>\n<li><code>layout</code> – 布局结构</li>\n<li><code>enums</code> – 枚举类型统一管理</li>\n<li><code>directives</code>、 <code>filters</code> – vue 语法扩展</li>\n<li>…</li>\n</ul>\n<p>根据需要再做补充</p>\n<h2 id=\"添加开发规范\"><a href=\"#添加开发规范\" class=\"headerlink\" title=\"添加开发规范\"></a>添加开发规范</h2><p>没有规矩不成方圆，开发规范是团队维护项目减少开发成本最有效的方式之一</p>\n<h3 id=\"eslint-prettier\"><a href=\"#eslint-prettier\" class=\"headerlink\" title=\"eslint / prettier\"></a>eslint / prettier</h3><h4 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add --dev eslint prettier eslint-config-prettier eslint-plugin-prettier eslint-define-config eslint-plugin-vue @typescript-eslint/eslint-plugin @typescript-eslint/parser</span><br></pre></td></tr></table></figure>\n<p>依赖有点多，其中<code>eslint-config-prettier</code> / <code>eslint-plugin-prettier</code> 是<code>eslint</code>的<code>prettier</code>插件，<code>eslint-plugin-vue</code>是 <code>eslint</code>的<code>vue</code>语法插件，剩下的是<code>typescript</code>语法支持。</p>\n<h4 id=\"创建配置文件\"><a href=\"#创建配置文件\" class=\"headerlink\" title=\"创建配置文件\"></a>创建配置文件</h4><figure class=\"highlight js\"><figcaption><span>.eslintrc.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> &#123; defineConfig &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'eslint-define-config'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = defineConfig(&#123;</span><br><span class=\"line\">  root: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  env: &#123;</span><br><span class=\"line\">    browser: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    node: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    es6: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  parser: <span class=\"string\">'vue-eslint-parser'</span>,</span><br><span class=\"line\">  parserOptions: &#123;</span><br><span class=\"line\">    parser: <span class=\"string\">'@typescript-eslint/parser'</span>,</span><br><span class=\"line\">    ecmaVersion: <span class=\"number\">2020</span>,</span><br><span class=\"line\">    sourceType: <span class=\"string\">'module'</span>,</span><br><span class=\"line\">    jsxPragma: <span class=\"string\">'React'</span>,</span><br><span class=\"line\">    ecmaFeatures: &#123;</span><br><span class=\"line\">      jsx: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  extends: [</span><br><span class=\"line\">    <span class=\"string\">'plugin:vue/vue3-recommended'</span>,</span><br><span class=\"line\">    <span class=\"string\">'plugin:@typescript-eslint/recommended'</span>,</span><br><span class=\"line\">    <span class=\"string\">'prettier'</span>,</span><br><span class=\"line\">    <span class=\"string\">'plugin:prettier/recommended'</span>,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  rules: &#123;</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/ban-ts-ignore'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/explicit-function-return-type'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-explicit-any'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-var-requires'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-empty-function'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/custom-event-name-casing'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'no-use-before-define'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-use-before-define'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/ban-ts-comment'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/ban-types'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-non-null-assertion'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/explicit-module-boundary-types'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'@typescript-eslint/no-unused-vars'</span>: [</span><br><span class=\"line\">      <span class=\"string\">'error'</span>,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        argsIgnorePattern: <span class=\"string\">'^_'</span>,</span><br><span class=\"line\">        varsIgnorePattern: <span class=\"string\">'^_'</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">'no-unused-vars'</span>: [</span><br><span class=\"line\">      <span class=\"string\">'error'</span>,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        argsIgnorePattern: <span class=\"string\">'^_'</span>,</span><br><span class=\"line\">        varsIgnorePattern: <span class=\"string\">'^_'</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">'space-before-function-paren'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"string\">'vue/attributes-order'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/one-component-per-file'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/html-closing-bracket-newline'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/max-attributes-per-line'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/multiline-html-element-content-newline'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/singleline-html-element-content-newline'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/attribute-hyphenation'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/require-default-prop'</span>: <span class=\"string\">'off'</span>,</span><br><span class=\"line\">    <span class=\"string\">'vue/html-self-closing'</span>: [</span><br><span class=\"line\">      <span class=\"string\">'error'</span>,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        html: &#123;</span><br><span class=\"line\">          <span class=\"keyword\">void</span>: <span class=\"string\">'always'</span>,</span><br><span class=\"line\">          normal: <span class=\"string\">'never'</span>,</span><br><span class=\"line\">          component: <span class=\"string\">'always'</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        svg: <span class=\"string\">'always'</span>,</span><br><span class=\"line\">        math: <span class=\"string\">'always'</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><figcaption><span>prettier.config.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  printWidth: <span class=\"number\">100</span>,</span><br><span class=\"line\">  tabWidth: <span class=\"number\">2</span>,</span><br><span class=\"line\">  useTabs: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  semi: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  singleQuote: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  quoteProps: <span class=\"string\">'as-needed'</span>,</span><br><span class=\"line\">  bracketSpacing: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  trailingComma: <span class=\"string\">'es5'</span>,</span><br><span class=\"line\">  jsxBracketSameLine: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  jsxSingleQuote: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  arrowParens: <span class=\"string\">'always'</span>,</span><br><span class=\"line\">  insertPragma: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  requirePragma: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  proseWrap: <span class=\"string\">'never'</span>,</span><br><span class=\"line\">  htmlWhitespaceSensitivity: <span class=\"string\">'strict'</span>,</span><br><span class=\"line\">  endOfLine: <span class=\"string\">'lf'</span>,</span><br><span class=\"line\">  rangeStart: <span class=\"number\">0</span>,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改-package-json\"><a href=\"#修改-package-json\" class=\"headerlink\" title=\"修改 package.json\"></a>修改 package.json</h4><figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\"><span class=\"addition\">+   \"lint:eslint\": \"eslint \\\"&#123;src,mock&#125;/**/*.&#123;vue,ts,tsx,js,jsx,css,scss,postcss&#125;\\\" --fix\"</span></span><br><span class=\"line\"><span class=\"addition\">+   \"lint\": \"yarn lint:eslint\"</span></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p>表示格式化<code>src</code>文件夹下所有的<code>ts</code>、<code>js</code>、<code>vue</code>、<code>css</code>、<code>scss</code>、<code>json</code>文件，如果有额外补充，参照语法自己修改即可。</p>\n<h3 id=\"stylelint\"><a href=\"#stylelint\" class=\"headerlink\" title=\"stylelint\"></a>stylelint</h3><h4 id=\"安装依赖\"><a href=\"#安装依赖\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add --dev stylelint stylelint-config-prettier stylelint-config-standard stylelint-order</span><br></pre></td></tr></table></figure>\n<h4 id=\"创建stylelint-config-js\"><a href=\"#创建stylelint-config-js\" class=\"headerlink\" title=\"创建stylelint.config.js\"></a>创建stylelint.config.js</h4><figure class=\"highlight js\"><figcaption><span>ROOT/stylelint.config.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  root: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  plugins: [<span class=\"string\">'stylelint-order'</span>],</span><br><span class=\"line\">  extends: [<span class=\"string\">'stylelint-config-standard'</span>, <span class=\"string\">'stylelint-config-prettier'</span>],</span><br><span class=\"line\">  rules: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// custom rules...</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  ignoreFiles: [<span class=\"string\">'**/*.js'</span>, <span class=\"string\">'**/*.jsx'</span>, <span class=\"string\">'**/*.tsx'</span>, <span class=\"string\">'**/*.ts'</span>],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"修改-package-json-1\"><a href=\"#修改-package-json-1\" class=\"headerlink\" title=\"修改 package.json\"></a>修改 package.json</h4><figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\"><span class=\"addition\">+   \"lint:stylelint\": \"stylelint \\\"**/*.&#123;vue,postcss,css,scss&#125;\\\" --fix\",</span></span><br><span class=\"line\"><span class=\"deletion\">-   \"lint\": \"yarn lint:eslint\"</span></span><br><span class=\"line\"><span class=\"addition\">+   \"lint\": \"yarn lint:eslint &amp;&amp; yarn lint:stylelint\"</span></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"commitlint-以及-husky-lint-staged-配置\"><a href=\"#commitlint-以及-husky-lint-staged-配置\" class=\"headerlink\" title=\"commitlint 以及 husky / lint-staged 配置\"></a>commitlint 以及 husky / lint-staged 配置</h3><h4 id=\"安装依赖-1\"><a href=\"#安装依赖-1\" class=\"headerlink\" title=\"安装依赖\"></a>安装依赖</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yarn add --dev commitizen @commitlint/cli @commitlint/config-conventional commitlint-config-cz cz-conventional-changelog cz-customizable lint-staged</span><br></pre></td></tr></table></figure>\n<h4 id=\"配置-husky\"><a href=\"#配置-husky\" class=\"headerlink\" title=\"配置 husky\"></a>配置 husky</h4><p>参照<a href=\"https://typicode.github.io/husky/#/?id=install\" target=\"_blank\" rel=\"noopener\">官方文档</a>，安装<code>husky</code>并启用<code>git hooks</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx husky install</span><br></pre></td></tr></table></figure>\n<p>修改<code>package.json</code></p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  \"scripts\": &#123;</span><br><span class=\"line\"><span class=\"addition\">+    \"prepare\": \"husky install\"</span></span><br><span class=\"line\"><span class=\"addition\">+    \"commit\": \"git-cz\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"><span class=\"addition\">+ \"config\": &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+   \"commitizen\": &#123;</span></span><br><span class=\"line\"><span class=\"addition\">+     \"path\": \"node_modules/cz-customizable\"</span></span><br><span class=\"line\"><span class=\"addition\">+  &#125;</span></span><br><span class=\"line\"><span class=\"addition\">+ &#125;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>添加<code>commit</code>规范相关的<code>git hooks</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npx husky add .husky/commit-msg 'yarn commitlint --edit \"$1\"'</span><br></pre></td></tr></table></figure>\n<p>创建<code>.cz-config.js</code>，自定义想要的提交格式。</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">'use strict'</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  types: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'feat'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'✨  feat:         添加新功能'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'fix'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'🐞  fix:          修复bug'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'style'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'💅  style:        代码格式变动, 不影响代码功能的更改(修改空格/格式化代码等操作)'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'docs'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'📚  docs:         修改文档'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'test'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'🏁  test:         新增或修改测试用例'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'refactor'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'🛠   refactor:     既不是新增功能，也不是修改bug的代码变动'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'chore'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'🗯   chore:        更改环境配置相关文件'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'revert'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'⏪  revert:       版本回退'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      value: <span class=\"string\">'ui'</span>,</span><br><span class=\"line\">      name: <span class=\"string\">'✏️   ui:           只更新css样式，不涉及任何业务功能的修改'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  scopes: [],</span><br><span class=\"line\">  allowCustomScopes: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  allowBreakingChanges: [<span class=\"string\">'feat'</span>, <span class=\"string\">'fix'</span>],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>如此，执行<code>yarn commit</code>命令，会出现以下效果<br><img src=\"/img/commitizen.jpg\" alt=\"commitizen\"><br>方向键选择要提交的类型，确定后输入提交的信息即可。当然如果你更喜欢命令行直接提交也是可以的，新建文件<code>commitlint.config.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ignores: [<span class=\"function\">(<span class=\"params\">commit</span>) =&gt;</span> commit.includes(<span class=\"string\">'init'</span>)],</span><br><span class=\"line\">  extends: [<span class=\"string\">'@commitlint/config-conventional'</span>, <span class=\"string\">'cz'</span>],</span><br><span class=\"line\">  parserPreset: &#123;</span><br><span class=\"line\">    parserOpts: &#123;</span><br><span class=\"line\">      headerPattern: <span class=\"regexp\">/^(\\w*|[\\u4e00-\\u9fa5]*)(?:[\\(\\（](.*)[\\)\\）])?[\\:\\：] (.*)/</span>,</span><br><span class=\"line\">      headerCorrespondence: [<span class=\"string\">'type'</span>, <span class=\"string\">'scope'</span>, <span class=\"string\">'subject'</span>],</span><br><span class=\"line\">      referenceActions: [</span><br><span class=\"line\">        <span class=\"string\">'close'</span>,</span><br><span class=\"line\">        <span class=\"string\">'closes'</span>,</span><br><span class=\"line\">        <span class=\"string\">'closed'</span>,</span><br><span class=\"line\">        <span class=\"string\">'fix'</span>,</span><br><span class=\"line\">        <span class=\"string\">'fixes'</span>,</span><br><span class=\"line\">        <span class=\"string\">'fixed'</span>,</span><br><span class=\"line\">        <span class=\"string\">'resolve'</span>,</span><br><span class=\"line\">        <span class=\"string\">'resolves'</span>,</span><br><span class=\"line\">        <span class=\"string\">'resolved'</span>,</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      issuePrefixes: [<span class=\"string\">'#'</span>],</span><br><span class=\"line\">      noteKeywords: [<span class=\"string\">'BREAKING CHANGE'</span>],</span><br><span class=\"line\">      fieldPattern: <span class=\"regexp\">/^-(.*?)-$/</span>,</span><br><span class=\"line\">      revertPattern: <span class=\"regexp\">/^Revert\\s\"([\\s\\S]*)\"\\s*This reverts commit (\\w*)\\./</span>,</span><br><span class=\"line\">      revertCorrespondence: [<span class=\"string\">'header'</span>, <span class=\"string\">'hash'</span>],</span><br><span class=\"line\">      warn() &#123;&#125;,</span><br><span class=\"line\">      mergePattern: <span class=\"literal\">null</span>,</span><br><span class=\"line\">      mergeCorrespondence: <span class=\"literal\">null</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  rules: &#123;</span><br><span class=\"line\">    <span class=\"string\">'body-leading-blank'</span>: [<span class=\"number\">2</span>, <span class=\"string\">'always'</span>],</span><br><span class=\"line\">    <span class=\"string\">'footer-leading-blank'</span>: [<span class=\"number\">1</span>, <span class=\"string\">'always'</span>],</span><br><span class=\"line\">    <span class=\"string\">'header-max-length'</span>: [<span class=\"number\">2</span>, <span class=\"string\">'always'</span>, <span class=\"number\">108</span>],</span><br><span class=\"line\">    <span class=\"string\">'subject-empty'</span>: [<span class=\"number\">2</span>, <span class=\"string\">'never'</span>],</span><br><span class=\"line\">    <span class=\"string\">'type-empty'</span>: [<span class=\"number\">2</span>, <span class=\"string\">'never'</span>],</span><br><span class=\"line\">    <span class=\"string\">'type-enum'</span>: [</span><br><span class=\"line\">      <span class=\"number\">2</span>,</span><br><span class=\"line\">      <span class=\"string\">'always'</span>,</span><br><span class=\"line\">      [</span><br><span class=\"line\">        <span class=\"string\">'feat'</span>, <span class=\"comment\">// 增加新功能</span></span><br><span class=\"line\">        <span class=\"string\">'fix'</span>, <span class=\"comment\">// 修复 bug</span></span><br><span class=\"line\">        <span class=\"string\">'style'</span>, <span class=\"comment\">// 修改不影响功能的代码格式（注意是代码格式，不是 css 样式）</span></span><br><span class=\"line\">        <span class=\"string\">'docs'</span>, <span class=\"comment\">// 新增文档</span></span><br><span class=\"line\">        <span class=\"string\">'test'</span>, <span class=\"comment\">// 新增测试用例</span></span><br><span class=\"line\">        <span class=\"string\">'refactor'</span>, <span class=\"comment\">// 重构（既不是新增功能，也不是修改bug的代码变动）</span></span><br><span class=\"line\">        <span class=\"string\">'chore'</span>, <span class=\"comment\">// 构建过程或辅助工具的变动</span></span><br><span class=\"line\">        <span class=\"string\">'revert'</span>, <span class=\"comment\">// 版本回退</span></span><br><span class=\"line\">        <span class=\"string\">'ui'</span>, <span class=\"comment\">// 只更新css样式，不涉及任何业务功能的修改</span></span><br><span class=\"line\">      ],</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>具体规则可以查阅相关文档。需要注意的是，<code>rules</code>中的<code>type-enum</code>选项，一旦定义了，提交的信息就必须以规定过的<code>type</code>来开头。否则都会出现 error，阻止本次提交。简单来说，<code>commitlint</code>目的就是让开发者每次提交都按照规定，上面规则规定了提交的形式为<code>type: xxxxx</code>(注意冒号之后有空格)，其中 <code>type</code> 为上述定义的 type，这也是绝大部分开发者习惯的提交方式。</p>\n<p>参考<a href=\"https://github.com/okonet/lint-staged#configuration\" target=\"_blank\" rel=\"noopener\">lint-staged官方文档</a>，根目录添加<code>lint-staged.config.js</code></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  <span class=\"string\">'*.&#123;js,jsx,ts,tsx,vue&#125;'</span>: [<span class=\"string\">'npm run lint'</span>],</span><br><span class=\"line\">  <span class=\"string\">'package.json'</span>: [<span class=\"string\">'prettier --write'</span>],</span><br><span class=\"line\">  <span class=\"string\">'*.&#123;css,scss,less,styl,html&#125;'</span>: [<span class=\"string\">'stylelint --fix'</span>, <span class=\"string\">'prettier --write'</span>],</span><br><span class=\"line\">  <span class=\"string\">'*.md'</span>: [<span class=\"string\">'prettier --write'</span>],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>修改<code>pre-commit</code></p>\n<figure class=\"highlight diff\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"deletion\">-  yarn lint</span></span><br><span class=\"line\"><span class=\"addition\">+  yarn lint-staged --allow-empty \"$1\"</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"end\"><a href=\"#end\" class=\"headerlink\" title=\"end\"></a>end</h2><p>如此，一个基本的开发架构就搭建完成了，没有规矩，不成方圆。这一篇主要制定了一系列开发规范来约束开发习惯，在我看来，团队合作开发，个人能力是不及规范来得重要的。我们规范了项目结构，规范了代码结构，规定了提交结构。接下来，<strong>工欲善其事必先利其器，下一节专门说说 vscode 的相关配置</strong></p>\n","categories":[{"name":"vue","path":"api/categories/vue.json"}],"tags":[{"name":"vue3","path":"api/tags/vue3.json"},{"name":"vite","path":"api/tags/vite.json"}]}